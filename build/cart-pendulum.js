!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.CP=e():t.CP=e()}(self,(function(){return(()=>{"use strict";var t,e,i,s,r,n,o,a,h,l,c={d:(t,e)=>{for(var i in e)c.o(e,i)&&!c.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},d={};return c.r(d),c.d(d,{Box:()=>e,CartSimulation:()=>s,DataRecorder:()=>l,Line:()=>i,LinearModel:()=>n,LinearModelTrain:()=>a,LinearRegression:()=>r,Runner:()=>o,Utils:()=>h,Vector2:()=>t}),t=class{constructor(t,e){this.x=t,this.y=e}},e=class{constructor(t,e){this.min=t,this.max=e}getSize(){return new t(this.max.x-this.min.x,this.max.y-this.min.y)}draw(t){var e;return e=this.getSize(),t.lineWidth=3,t.strokeRect(this.min.x,this.min.y,e.x,e.y)}},i=class{constructor(t,e){this.origin=t,this.end=e}size(){return Math.sqrt(Math.pow(this.origin.x-this.end.x,2)+Math.pow(this.origin.y-this.end.y,2))}draw(t){return t.lineWidth=3,t.beginPath(),t.moveTo(this.origin.x,this.origin.y),t.lineTo(this.end.x,this.end.y),t.stroke()}},s=class{constructor(){this.barrierDistance=400,this.boxHalfSize=50,this.moveAcceleration=250,this.limitAngle=.8,this.friction=.5,this.pendulumGravity=1.4,this.pendulumMomentum=.01,this.cart=new e(new t(-this.boxHalfSize,-30),new t(this.boxHalfSize,30)),this.pendulum=new i(new t(0,0),new t(0,100)),this.barrierLeft=new i(new t(-this.barrierDistance,-1e3),new t(-this.barrierDistance,1e3)),this.barrierRight=new i(new t(this.barrierDistance,-1e3),new t(this.barrierDistance,1e3)),this.reset()}reset(){var t;return this.gameOver=!1,this.score=0,this.position=0,this.leftPressed=!1,this.rightPressed=!1,this.acceleration=0,this.velocity=100*(2*Math.random()-1),this.velocity+=null!=(t=this.velocity<0)?t:-{50:50},this.angle=0}draw(t){return this.barrierLeft.draw(t),this.barrierRight.draw(t),t.translate(this.position,0),t.strokeStyle="#FF0000",t.lineWidth=1,t.beginPath(),t.moveTo(100*Math.sin(-this.limitAngle),100*Math.cos(-this.limitAngle)),t.lineTo(0,0),t.lineTo(100*Math.sin(this.limitAngle),100*Math.cos(this.limitAngle)),t.stroke(),t.strokeStyle="#000000",t.lineWidth=3,this.pendulum.end.x=100*Math.sin(this.angle),this.pendulum.end.y=100*Math.cos(this.angle),this.pendulum.draw(t),this.cart.draw(t)}update(t){if(!this.gameOver)return this.leftPressed?this.acceleration=-this.moveAcceleration:this.rightPressed?this.acceleration=this.moveAcceleration:this.acceleration=0,this.velocity+=this.acceleration*t,this.velocity*=1-this.friction*t,this.position+=this.velocity*t,this.angle+=this.angle*this.pendulumGravity*t,this.angle-=this.velocity*this.pendulumMomentum*t,this.score+=t,(this.angle>this.limitAngle||this.angle<-this.limitAngle)&&(this.gameOver=!0),this.position+this.boxHalfSize>this.barrierDistance||this.position-this.boxHalfSize<-this.barrierDistance?this.gameOver=!0:void 0}},r=class t{constructor(t,e){this.ori=t,this.decl=e}jitter(t){return this.ori+=(Math.random()-.5)*t,this.decl+=(Math.random()-.5)*t}clone(){return new t(this.ori,this.decl)}},n=class t{constructor(){this.vel=new r(0,0),this.angle=new r(0,0),this.pos=new r(0,0),this.e=0}jitter(t){return this.vel.jitter(t),this.angle.jitter(t),this.pos.jitter(t),this.e+=(Math.random()-.5)*t}clone(){var e;return(e=new t).vel=this.pos.clone(),e.angle=this.pos.clone(),e.pos=this.pos.clone(),e.e=this.e,e}control(t){var e,i;return e=this.vel.decl*t.velocity+this.vel.ori,i=this.angle.decl*t.angle+this.angle.ori+e+(this.pos.decl*t.position+this.pos.ori),t.leftPressed=i<this.e,t.rightPressed=i>this.e}},o=class{static runHeadless(t,e,i){var r,n,o;for(e=void 0!==e?e:Infinity,r=new s,i&&(o=performance.now());!r.gameOver&&r.score<e;)void 0!==t&&t(r),r.update(.016666666666666666);return i&&(n=performance.now(),console.log(" - Simulation ended with "+r.score+" points, took "+(n-o)+".")),r.score}static runGraphical(t,e,i){var r,n,o,a,h;return r=new s,n=t.getContext("2d"),a=0,o=0,(h=function(s){var l;return s?(l=(s-o)/1e3,o=s):l=0,void 0!==e&&e(r),r.update(l),r.gameOver&&(void 0!==i&&i(r,a),r.score>a&&(a=r.score),r.reset()),n.save(),n.clearRect(0,0,t.width,t.height),n.font="15px Arial",n.textAlign="left",n.fillText("Points: "+r.score,10,20),n.fillText("Max: "+a,10,40),n.transform(1,0,0,-1,0,t.height),n.translate(t.width/2,t.height/2),r.draw(n),n.restore(),requestAnimationFrame(h)})()}},a=class t{static trainIterative(e,i,s,r){var o,a,h,l,c,d,u,g;for(e=void 0!==e?e:500,i=void 0!==i?i:100,s=void 0!==s?s:5,r=void 0!==r?r:2e3,console.log(" - Training process starting. ",{epochs:e,iterations:i,runs:s}),o=new n,a=t.testModel(o,s,r),h=0;h<e;){for(console.log(" - Running epoch ",h," score ",a),l=null,c=0,d=0;d<i;)(u=o.clone()).jitter(1),(g=t.testModel(u,s,r))>c&&(l=u,c=g),d++;if(c>=a&&(o=l,a=c),a>=r)break;h++}return console.log(" - Training finished with score ",a," model ",o),o}static trainRandom(e,i,s){var r,o,a,h,l;for(e=void 0!==e?e:1e5,i=void 0!==i?i:5,s=void 0!==s?s:2e3,console.log(" - Training process starting. ",{iterations:e,runs:i}),r=null,o=0,a=0;a<e&&((h=new n).jitter(2),(l=t.testModel(h,i,s))>o&&(r=h,o=l),console.log(" - Iteration ",a," score ",o),!(o>=s));)a++;return console.log(" - Training finished with score ",o," model ",r),r}static testModel(t,e,i){var s,r,n;for(n=0,r=0;r<e;)s=function(e){t.control(e)},n+=o.runHeadless(s,i),r++;return n/e}},h=class{static writeFile(t,e){var i,s;"object"==typeof t&&(t=JSON.stringify(t,null,"\t")),i=new Blob([t],{type:"octet/stream"}),(s=document.createElement("a")).download=e,s.href=window.URL.createObjectURL(i),s.style.display="none",s.onclick=function(){document.body.removeChild(this)},document.body.appendChild(s),s.click()}static readFile(t){var e;return(e=document.createElement("input")).type="file",e.style.display="none",document.body.appendChild(e),e.onchange=function(){var i,s;if(0!==(i=e.files).length)return(s=new FileReader).onload=function(){var e;return e=s.result,t(e)},s.readAsText(i[0]),document.body.removeChild(e)},e.click()}},l=class{constructor(){this.active=!0,this.data=[],this.bestScore=0,this.bestData=[]}getData(){return this.bestData}end(t){if(this.active)return t>this.bestScore&&(this.bestData=this.data,this.bestScore=t),this.data=[]}record(t){if(this.active)return this.data.push({input:[t.velocity,t.angle,t.position],output:[t.leftPressed,t.rightPressed]})}},d})()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU1DLFFBQVUsT0FFekJSLEVBQVNTLFFBQVUsV0FDbEJSLFNBQVNTLEtBQUtDLFlBQVlDLE9BRzNCWCxTQUFTUyxLQUFLRyxZQUFZYixHQUUxQkEsRUFBU2MsUUFLQyxnQkFBQ0MsR0FDYixNLE9BQUVDLEVBQVVmLFNBQVNDLGNBQWMsVUFDekJILEtBQU8sT0FDZmlCLEVBQVFULE1BQU1DLFFBQVUsT0FDeEJQLFNBQVNTLEtBQUtHLFlBQVlHLEdBRTFCQSxFQUFRQyxTQUFXLFdBQ3JCLFFBQ0csR0FBbUIsS0FEbkJDLEVBQVFGLEVBQVFFLE9BQ1BDLE8sT0FHVEMsRUFBUyxJQUFJQyxZQUNOQyxPQUFTLFdBQ25CLE0sT0FBSUMsRUFBT0gsRUFBT0ksT0FDZFQsRUFBT1EsSUFFUkgsRUFBT0ssV0FBV1AsRUFBTSxJQUN4QmpCLFNBQVNTLEtBQUtDLFlBQVlLLElBRTNCQSxFQUFRRixVQ3pDSlksRUFBTixNQUNDeEksY0FFQyxLQUFDeUksUUFBUyxFQUdWLEtBQUNsQyxLQUFPLEdBR1IsS0FBQ1YsVUFBWSxFQUdiLEtBQUM2QyxTQUFXLEdBSWJDLFVBQ0MsT0FBTyxLQUFDRCxTQUdUNUgsSUFBTXNCLEdBQ0wsR0FBRyxLQUFDcUcsTyxPQUNBckcsRUFBUSxLQUFDeUQsWUFDWCxLQUFDNkMsU0FBVyxLQUFDbkMsS0FDYixLQUFDVixVQUFZekQsR0FDZCxLQUFDbUUsS0FBTyxHQUdWcUMsT0FBUzlHLEdBQ1IsR0FBRyxLQUFDMkcsTyxPQUNILEtBQUNsQyxLQUFLc0MsS0FBSyxDQUNWQyxNQUFPLENBQUNoSCxFQUFLVyxTQUFVWCxFQUFLYSxNQUFPYixFQUFLTyxVQUN4QzBHLE9BQVEsQ0FBQ2pILEVBQUtRLFlBQWFSLEVBQUtTLGtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQ1Avd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL0NQL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL0NQLy4vc291cmNlL1ZlY3RvcjIuY29mZmVlIiwid2VicGFjazovL0NQLy4vc291cmNlL0JveC5jb2ZmZWUiLCJ3ZWJwYWNrOi8vQ1AvLi9zb3VyY2UvTGluZS5jb2ZmZWUiLCJ3ZWJwYWNrOi8vQ1AvLi9zb3VyY2UvQ2FydFNpbXVsYXRpb24uY29mZmVlIiwid2VicGFjazovL0NQLy4vc291cmNlL0xpbmVhclJlZ3Jlc3Npb24uY29mZmVlIiwid2VicGFjazovL0NQLy4vc291cmNlL0xpbmVhck1vZGVsLmNvZmZlZSIsIndlYnBhY2s6Ly9DUC8uL3NvdXJjZS9SdW5uZXIuY29mZmVlIiwid2VicGFjazovL0NQLy4vc291cmNlL0xpbmVhck1vZGVsVHJhaW4uY29mZmVlIiwid2VicGFjazovL0NQLy4vc291cmNlL1V0aWxzLmNvZmZlZSIsIndlYnBhY2s6Ly9DUC8uL3NvdXJjZS9EYXRhUmVjb3JkZXIuY29mZmVlIiwid2VicGFjazovL0NQL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9DUC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL0NQL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiQ1BcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wiQ1BcIl0gPSBmYWN0b3J5KCk7XG59KShzZWxmLCBmdW5jdGlvbigpIHtcbnJldHVybiAiLCIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiY2xhc3MgVmVjdG9yMlxyXG5cdCMgMkQgVmVjdG9yIG9iamVjdCByZXByZXNlbnRlZCBieSB4IGFuZCB5IGNvb3JkaW5hdGVzLlxyXG5cdCMgXHJcblx0IyBAcGFyYW0gW251bWJlcl0geCBcclxuXHQjIEBwYXJhbSBbbnVtYmVyXSB5IFxyXG5cdGNvbnN0cnVjdG9yOiAoeCwgeSkgLT4gXHJcblx0XHRAeCA9IHhcclxuXHRcdEB5ID0geVxyXG5cclxuZXhwb3J0IHtWZWN0b3IyfSIsImltcG9ydCB7VmVjdG9yMn0gZnJvbSAnLi9WZWN0b3IyJ1xyXG5cclxuIyBCb3ggaXMgcmVwcmVzZW50ZWQgZnJvbSBhIG1pbmltdW0gYW5kIGEgbWF4aW11bSBwb2ludHMuXHJcbmNsYXNzIEJveFxyXG5cdCMgQHBhcmFtIFtWZWN0b3IyXSBtaW4gXHJcblx0IyBAcGFyYW0gW1ZlY3RvcjJdIG1heCBcclxuXHRjb25zdHJ1Y3RvcjogKG1pbiwgbWF4KSAtPlxyXG5cdFx0QG1pbiA9IG1pblxyXG5cdFx0QG1heCA9IG1heFxyXG5cclxuXHQjIEdldCB0aGUgc2l6ZSBvZiB0aGUgYm94IGluIGEgVmVjdG9yLlxyXG5cdCMgXHJcblx0IyBAcmV0dXJucyBbVmVjdG9yMl0gU2l6ZSBvZiB0aGUgYm94LiBcclxuXHRnZXRTaXplOiAoKSAtPlxyXG5cdFx0cmV0dXJuIG5ldyBWZWN0b3IyKEBtYXgueCAtIEBtaW4ueCwgQG1heC55IC0gQG1pbi55KVxyXG5cclxuXHQjIERyYXcgdGhlIGJveCBpbnRvIGEgY29udGV4dCBmb3IgdmlzdWFsaXphdGlvbi5cclxuXHQjIFxyXG5cdCMgQHBhcmFtIFtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkRdIGNvbnRleHQgXHJcblx0ZHJhdzogKGNvbnRleHQpIC0+XHJcblx0XHRzaXplID0gQGdldFNpemUoKVxyXG5cdFx0Y29udGV4dC5saW5lV2lkdGggPSAzXHJcblx0XHRjb250ZXh0LnN0cm9rZVJlY3QoQG1pbi54LCBAbWluLnksIHNpemUueCwgc2l6ZS55KVxyXG5cclxuZXhwb3J0IHtCb3h9IiwiaW1wb3J0IHtWZWN0b3IyfSBmcm9tICcuL1ZlY3RvcjInXHJcblxyXG4jIExpbmUgYmV0d2VlbiB0d28gcG9pbnRzIChvcmlnaW4gdG8gZW5kKS5cclxuI1xyXG4jIEBwYXJhbSBbVmVjdG9yMl0gb3JpZ2luIFxyXG4jIEBwYXJhbSBbVmVjdG9yMl0gZW5kXHJcbmNsYXNzIExpbmVcclxuXHRjb25zdHJ1Y3RvcjogKG9yaWdpbiwgZW5kKSAtPlxyXG5cdFx0QG9yaWdpbiA9IG9yaWdpblxyXG5cdFx0QGVuZCA9IGVuZFxyXG5cdFxyXG5cdCMgQ2FsY3VsYXRlIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIHRoZSBvcmlnaW4gYW5kIGVuZCBwb2ludHMuXHJcblx0IyBcclxuXHQjIEByZXR1cm5zIHtudW1iZXJ9IFNpemUgb2YgdGhlIGxpbmUuXHJcblx0c2l6ZTogKCkgLT5cclxuXHRcdHJldHVybiBNYXRoLnNxcnQoTWF0aC5wb3coQG9yaWdpbi54IC0gQGVuZC54LCAyKSArIE1hdGgucG93KEBvcmlnaW4ueSAtIEBlbmQueSwgMikpXHJcblxyXG5cdCMgRHJhdyB0aGUgbGluZSBpbnRvIGEgY2FudmFzIDJEIGNvbnRleHQuXHJcblx0IyBcclxuXHQjIEBwYXJhbSBbQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEXSBjb250ZXh0IFxyXG5cdGRyYXc6IChjb250ZXh0KSAtPlxyXG5cdFx0Y29udGV4dC5saW5lV2lkdGggPSAzXHJcblx0XHRjb250ZXh0LmJlZ2luUGF0aCgpXHJcblx0XHRjb250ZXh0Lm1vdmVUbyhAb3JpZ2luLngsIEBvcmlnaW4ueSlcclxuXHRcdGNvbnRleHQubGluZVRvKEBlbmQueCwgQGVuZC55KVxyXG5cdFx0Y29udGV4dC5zdHJva2UoKVxyXG5cclxuXHJcbmV4cG9ydCB7TGluZX0iLCJpbXBvcnQge1ZlY3RvcjJ9IGZyb20gJy4vVmVjdG9yMidcclxuaW1wb3J0IHtMaW5lfSBmcm9tICcuL0xpbmUnXHJcbmltcG9ydCB7Qm94fSBmcm9tICcuL0JveCdcclxuXHJcbiMgQ2FydCBzaW11bGF0aW9uIG9iamVjdCwgdGhhdCBjb250YWlucyB0aGUgZW50aXJlIGxvZ2ljIGZvciB0aGUgc2ltdWxhdGlvbi5cclxuIyBcclxuIyBUaGUgY2FydCBjYW4gYmUgY29uZmlndXJlZFxyXG5jbGFzcyBDYXJ0U2ltdWxhdGlvblxyXG5cdGNvbnN0cnVjdG9yOiAoKSAtPlxyXG5cdFx0IyBEaXN0YW5jZSBvZiB0aGUgYmFycmllcnMgcmVsYXRpdmUgdG8gdGhlIGNlbnRlci5cclxuXHRcdEBiYXJyaWVyRGlzdGFuY2UgPSA0MDBcclxuXHJcblx0XHQjIEhhbGYgdGhlIHNpemUgb2YgdGhlIGNhcnQgYm94LlxyXG5cdFx0QGJveEhhbGZTaXplID0gNTBcclxuXHJcblx0XHQjIEFjY2VsZXJhdGlvbiB1c2VkIGZvciBtb3ZlbWVudCBvZiB0aGUgY2FydCBvbiBrZXkgcHJlc3MuXHJcblx0XHRAbW92ZUFjY2VsZXJhdGlvbiA9IDI1MFxyXG5cclxuXHRcdCMgTGltaXQgYW5nbGUgdGhhdCB0aGUgcGVuZHVsdW0gY2FuIHJlYWNoLlxyXG5cdFx0QGxpbWl0QW5nbGUgPSAwLjhcclxuXHJcblx0XHQjIEZyaWN0aW9uIGFwcGx5ZWQgdG8gdGhlIHZlbG9jaXR5IG9mIHRoZSBjYXJ0XHJcblx0XHRAZnJpY3Rpb24gPSAwLjVcclxuXHJcblx0XHQjIEdyYXZpdHkgZGVmaW5lcyB0aGUgaW50ZW5zaXR5IG9mIHRoZSBmb3JjZSBwdWxsaW5nIHRoZSBwZW5kdWx1bSBkb3duLlxyXG5cdFx0QHBlbmR1bHVtR3Jhdml0eSA9IDEuNFxyXG5cclxuXHRcdCMgUGVuZHVsdW0gbW9tZW50dW0gZGVmaW5lcyBob3cgc3BlZWQgYWZlY3RzIHRoZSBwZW5kdWx1bVxyXG5cdFx0QHBlbmR1bHVtTW9tZW50dW0gPSAwLjAxXHJcblxyXG5cdFx0IyBCb3ggdGhhdCByZXByZXNlbnRzIHRoZSBjYXJ0LlxyXG5cdFx0QGNhcnQgPSBuZXcgQm94KG5ldyBWZWN0b3IyKC1AYm94SGFsZlNpemUsIC0zMCksIG5ldyBWZWN0b3IyKEBib3hIYWxmU2l6ZSwgMzApKVxyXG5cclxuXHRcdCMgTGluZSB0byByZXByZXNlbnQgdGhlIHBlbmR1bHVtXHJcblx0XHRAcGVuZHVsdW0gPSBuZXcgTGluZShuZXcgVmVjdG9yMigwLCAwKSwgbmV3IFZlY3RvcjIoMCwgMTAwKSlcclxuXHRcdFxyXG5cdFx0IyBMZWZ0IGJhcnJpZXIgbGltaXQuXHJcblx0XHRAYmFycmllckxlZnQgPSBuZXcgTGluZShuZXcgVmVjdG9yMigtQGJhcnJpZXJEaXN0YW5jZSwgLTEwMDApLCBuZXcgVmVjdG9yMigtQGJhcnJpZXJEaXN0YW5jZSwgMTAwMCkpXHJcblx0XHRcclxuXHRcdCMgUmlnaHQgYmFycmllciBsaW1pdC5cclxuXHRcdEBiYXJyaWVyUmlnaHQgPSBuZXcgTGluZShuZXcgVmVjdG9yMihAYmFycmllckRpc3RhbmNlLCAtMTAwMCksIG5ldyBWZWN0b3IyKEBiYXJyaWVyRGlzdGFuY2UsIDEwMDApKVxyXG5cdFx0QHJlc2V0KClcclxuXHJcblx0IyBSZXNldCB0aGUgc2ltdWxhdGlvbiBwYXJhbWV0ZXJzIGJhY2sgdG8gYSBpbml0aWFsIHN0YXRlLlxyXG5cdCMgXHJcblx0IyBUaGUgaW5pdGlhbCB2ZWxvY2l0eSBvZiB0aGUgY2FydCBpcyByYW5kb21pemVkLlxyXG5cdHJlc2V0OiAoKSAtPlxyXG5cdFx0QGdhbWVPdmVyID0gZmFsc2VcclxuXHRcdEBzY29yZSA9IDBcclxuXHRcdEBwb3NpdGlvbiA9IDBcclxuXHRcdEBsZWZ0UHJlc3NlZCA9IGZhbHNlXHJcblx0XHRAcmlnaHRQcmVzc2VkID0gZmFsc2VcclxuXHRcdEBhY2NlbGVyYXRpb24gPSAwLjBcclxuXHRcdFxyXG5cdFx0QHZlbG9jaXR5ID0gKE1hdGgucmFuZG9tKCkgKiAyIC0gMS4wKSAqIDEwMFxyXG5cdFx0QHZlbG9jaXR5ICs9IEB2ZWxvY2l0eSA8IDAgPyAtNTAgOiA1MFxyXG5cclxuXHRcdEBhbmdsZSA9IDAgIyhNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDAuNVxyXG5cclxuXHJcblx0IyBEcmF3IHRoZSBzaW11bGF0aW9uIHRvIGEgY29udGV4dCAyRCBmb3IgdmlzdWFsaXphdGlvbi5cclxuXHQjIFxyXG5cdCMgQHBhcmFtIFtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkRdIGNvbnRleHQgXHJcblx0ZHJhdzogKGNvbnRleHQpIC0+XHJcblx0XHRAYmFycmllckxlZnQuZHJhdyhjb250ZXh0KVxyXG5cdFx0QGJhcnJpZXJSaWdodC5kcmF3KGNvbnRleHQpXHJcblxyXG5cdFx0Y29udGV4dC50cmFuc2xhdGUoQHBvc2l0aW9uLCAwKVxyXG5cclxuXHRcdCMgR3VpZGVsaW5lc1xyXG5cdFx0Y29udGV4dC5zdHJva2VTdHlsZSA9ICcjRkYwMDAwJ1xyXG5cdFx0Y29udGV4dC5saW5lV2lkdGggPSAxXHJcblx0XHRjb250ZXh0LmJlZ2luUGF0aCgpXHJcblx0XHRjb250ZXh0Lm1vdmVUbyhNYXRoLnNpbigtQGxpbWl0QW5nbGUpICogMTAwLCBNYXRoLmNvcygtQGxpbWl0QW5nbGUpICogMTAwKVxyXG5cdFx0Y29udGV4dC5saW5lVG8oMCwgMClcclxuXHRcdGNvbnRleHQubGluZVRvKE1hdGguc2luKEBsaW1pdEFuZ2xlKSAqIDEwMCwgTWF0aC5jb3MoQGxpbWl0QW5nbGUpICogIDEwMClcclxuXHRcdGNvbnRleHQuc3Ryb2tlKClcclxuXHJcblx0XHRjb250ZXh0LnN0cm9rZVN0eWxlID0gJyMwMDAwMDAnXHJcblx0XHRjb250ZXh0LmxpbmVXaWR0aCA9IDNcclxuXHRcdEBwZW5kdWx1bS5lbmQueCA9IE1hdGguc2luKEBhbmdsZSkgKiAxMDBcclxuXHRcdEBwZW5kdWx1bS5lbmQueSA9IE1hdGguY29zKEBhbmdsZSkgKiAxMDBcclxuXHRcdEBwZW5kdWx1bS5kcmF3KGNvbnRleHQpXHJcblx0XHRAY2FydC5kcmF3KGNvbnRleHQpXHJcblxyXG5cclxuXHQjIFVwZGF0ZSB0aGUgbG9naWMgb2YgdGhlIHNpbXVsYXRpb24uXHJcblx0IyBcclxuXHQjIFRoZSBjYXJ0IG1vdmVzIGFjY29yZGluZyB0byBpdHMgdmVsb2NpdHksIHRoZSBzdGljayBpcyB1c2VkIGJhc2VkIG9uIHZlbG9jaXR5IGFuZCBpdHMgY3VycmVudCBhbmdsZSAoZ3Jhdml0eSkuXHJcblx0I1xyXG5cdCMgQHBhcmFtIFtudW1iZXJdIGRlbHRhIFRpbWUgZWxhcHNlZCBzaW5jZSBsYXN0IGZyYW1lIGluIHNlY29uZHMuXHJcblx0dXBkYXRlOiAoZGVsdGEpIC0+XHJcblx0XHQjIElmIGdhbWUgb3ZlciByZXR1cm5cclxuXHRcdGlmIEBnYW1lT3ZlclxyXG5cdFx0XHRyZXR1cm5cclxuXHJcblx0XHQjIFByb2Nlc3Mga2V5IHByZXNzZXNcclxuXHRcdGlmIEBsZWZ0UHJlc3NlZFxyXG5cdFx0XHRAYWNjZWxlcmF0aW9uID0gLUBtb3ZlQWNjZWxlcmF0aW9uXHJcblx0XHRlbHNlIGlmIEByaWdodFByZXNzZWRcclxuXHRcdFx0QGFjY2VsZXJhdGlvbiA9IEBtb3ZlQWNjZWxlcmF0aW9uXHJcblx0XHRlbHNlXHJcblx0XHRcdEBhY2NlbGVyYXRpb24gPSAwLjBcclxuXHJcblx0XHQjIFVwZGF0ZSBwaHlzaWNzXHJcblx0XHRAdmVsb2NpdHkgKz0gQGFjY2VsZXJhdGlvbiAqIGRlbHRhXHJcblx0XHRAdmVsb2NpdHkgKj0gMSAtIChAZnJpY3Rpb24gKiBkZWx0YSlcclxuXHRcdEBwb3NpdGlvbiArPSBAdmVsb2NpdHkgKiBkZWx0YVxyXG5cclxuXHRcdEBhbmdsZSArPSBAYW5nbGUgKiBAcGVuZHVsdW1HcmF2aXR5ICogZGVsdGFcclxuXHRcdEBhbmdsZSAtPSBAdmVsb2NpdHkgKiBAcGVuZHVsdW1Nb21lbnR1bSAqIGRlbHRhXHJcblxyXG5cdFx0QHNjb3JlICs9IGRlbHRhXHJcblxyXG5cdFx0IyBJZiB0aGUgYW5nbGUgb2YgdGhlIHBlbmR1bHVtIGRyb3AgYmVsbG93IHRoZSBtaW5pdW0gZW5kIHRoZSBnYW1lXHJcblx0XHRpZiBAYW5nbGUgPiBAbGltaXRBbmdsZSBvciBAYW5nbGUgPCAtQGxpbWl0QW5nbGVcclxuXHRcdFx0QGdhbWVPdmVyID0gdHJ1ZVxyXG5cclxuXHRcdCMgSWYgdGhlIGNhcnQgaGl0cyB0aGUgYmFycmllZCBlbmQgdGhlIGdhbWVcclxuXHRcdGlmIEBwb3NpdGlvbiArIEBib3hIYWxmU2l6ZSA+IEBiYXJyaWVyRGlzdGFuY2Ugb3IgQHBvc2l0aW9uIC0gQGJveEhhbGZTaXplIDwgLUBiYXJyaWVyRGlzdGFuY2VcclxuXHRcdFx0QGdhbWVPdmVyID0gdHJ1ZVxyXG5cclxuZXhwb3J0IHtDYXJ0U2ltdWxhdGlvbn0iLCJcclxuIyBMaW5lYXIgcmVncmVzc2lvbiBpcyByZXByZXNlbnRlZCBieSB0d28gcGFyYW1ldGVyczogdGhlIG9yaWdpbiBhbmQgc2xvcGUgb2YgdGhlIGxpbmUuXHJcbmNsYXNzIExpbmVhclJlZ3Jlc3Npb25cclxuXHQjIEBwYXJhbSBbbnVtYmVyXSBvcmkgT3JpZ2luIG9mIHRoZSBsaW5lLlxyXG5cdCMgQHBhcmFtIFtudW1iZXJdIGRlY2wgU2xvcGUgb2YgdGhlIGxpbmUuXHJcblx0Y29uc3RydWN0b3I6IChvcmksIGRlY2wpIC0+XHJcblx0XHRAb3JpID0gb3JpXHJcblx0XHRAZGVjbCA9IGRlY2xcclxuXHJcblxyXG5cdCMgSml0dGVyIHRoZSB2YWx1ZXMgaW4gdGhlIHJlZ3Jlc3Npb24gcmFuZG9tbHkuXHJcblx0IyBcclxuXHQjIFVzZWZ1bGwgZm9yIHRyYWluaW5nIHB1cnBvc2VzLlxyXG5cdCMgXHJcblx0IyBAcGFyYW0gW251bWJlcl0gc2NhbGUgU2NhbGUgb2YgdGhlIGppdHRlcmluZy4gXHJcblx0aml0dGVyOiAoc2NhbGUpIC0+XHJcblx0XHRAb3JpICs9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIHNjYWxlXHJcblx0XHRAZGVjbCArPSAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiBzY2FsZVxyXG5cclxuXHJcblx0IyBDcmVhdGUgYSBjb3B5IG9mIHRoZSBsaW5lYXIgcmVncmVzc2lvbiBvYmplY3QuXHJcblx0IyBcclxuXHQjIEByZXR1cm5zIFtMaW5lYXJSZWdyZXNzaW9uXSBDbG9uZSBvZiB0aGUgbGluZWFyIHJlZ3Jlc3Npb24gb2JqZWN0LlxyXG5cdGNsb25lOiAoKSAtPlxyXG5cdFx0cmV0dXJuIG5ldyBMaW5lYXJSZWdyZXNzaW9uKEBvcmksIEBkZWNsKVxyXG5cclxuZXhwb3J0IHtMaW5lYXJSZWdyZXNzaW9ufSIsImltcG9ydCB7TGluZWFyUmVncmVzc2lvbn0gZnJvbSAnLi9MaW5lYXJSZWdyZXNzaW9uJ1xyXG5cclxuIyBNb2RlbCB0byBjb250cm9sIHRoZSBjYXJ0LCBpdHMgcGFyYW1ldGVycyBjYW4gYmUgc2V0IGFuZCB1c2VkIHRvIGNvbnRyb2wgdGhlIGNhcnQuXHJcbiMgXHJcbiMgVGhlIG1vZGVsIGlzIGNvbXBvc2VkIG9mIDMgbGluZWFyIHJlZ3Jlc3Npb25zIGZvciB3aWNoIHRoZWlyIHBhcmFtZXRlcnMgY2FuIGJlIHRyYWluZWQgYW5kIHVzZWQgdG8gY29udHJvbCB0aGUgY2FydCBvYmplY3QuXHJcbmNsYXNzIExpbmVhck1vZGVsXHJcblx0Y29uc3RydWN0b3I6ICgpIC0+XHJcblx0XHRAdmVsID0gbmV3IExpbmVhclJlZ3Jlc3Npb24oMCwgMC4wKVxyXG5cdFx0QGFuZ2xlID0gbmV3IExpbmVhclJlZ3Jlc3Npb24oMCwgMC4wKVxyXG5cdFx0QHBvcyA9IG5ldyBMaW5lYXJSZWdyZXNzaW9uKDAsIDAuMClcclxuXHRcdEBlID0gMC4wXHJcblxyXG5cdCMgSml0dGVyIGFsbCB2YWx1ZXMgb2YgdGhlIG1vZGVsXHJcblx0I1xyXG5cdCMgQ2FuIGJlIHVzZWQgZHVyaW5nIHRyYWluaW5nIHRvIHByb2R1Y2UgdmFyaWF0aW9ucyBvZiB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgbW9kZWwuXHJcblx0I1xyXG5cdCMgQHBhcmFtIFtudW1iZXJdIHNjYWxlIFNjYWxlIG9mIHRoZSBqaXR0ZXJpbmcgdGhlIHZhbHVlcyB3aWxsIHZhcmlhdGUgaGFsZiBvZiB0aGUgc2NhbGUgdXAgYW5kIGRvd24uXHJcblx0aml0dGVyOiAoc2NhbGUpIC0+XHJcblx0XHRAdmVsLmppdHRlcihzY2FsZSlcclxuXHRcdEBhbmdsZS5qaXR0ZXIoc2NhbGUpXHJcblx0XHRAcG9zLmppdHRlcihzY2FsZSlcclxuXHJcblx0XHRAZSArPSAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiBzY2FsZVxyXG5cclxuXHQjIENyZWF0ZSBhIG5ldyBvYmplY3Qgd2l0aCBhIGNvcHkgb2YgdGhlIHZhbHVlcyBzdG9yZWQgaW4gdGhpcyBvbmUuXHJcblx0Y2xvbmU6ICgpIC0+XHJcblx0XHRtID0gbmV3IExpbmVhck1vZGVsKClcclxuXHRcdFxyXG5cdFx0bS52ZWwgPSBAcG9zLmNsb25lKClcclxuXHRcdG0uYW5nbGUgPSBAcG9zLmNsb25lKClcclxuXHRcdG0ucG9zID0gQHBvcy5jbG9uZSgpXHJcblx0XHRtLmUgPSBAZVxyXG5cclxuXHRcdHJldHVybiBtXHJcblxyXG5cdCMgQ29udHJvbCB0aGUgc2ltdWxhdGlvbiB1c2luZyB0aGUgcGFyYW1ldGVycyBzdG9yZWQgaW4gdGhpcyBtb2RlbC5cclxuXHRjb250cm9sOiAoY2FydCkgLT5cclxuXHRcdHYgPSBAdmVsLmRlY2wgKiBjYXJ0LnZlbG9jaXR5ICsgQHZlbC5vcmlcclxuXHRcdGEgPSBAYW5nbGUuZGVjbCAqIGNhcnQuYW5nbGUgKyBAYW5nbGUub3JpXHJcblx0XHRwID0gQHBvcy5kZWNsICogY2FydC5wb3NpdGlvbiArIEBwb3Mub3JpXHJcblxyXG5cdFx0dmFsdWUgPSBhICsgdiArIHBcclxuXHJcblx0XHRjYXJ0LmxlZnRQcmVzc2VkID0gdmFsdWUgPCBAZVxyXG5cdFx0Y2FydC5yaWdodFByZXNzZWQgPSB2YWx1ZSA+IEBlXHJcblxyXG5leHBvcnQge0xpbmVhck1vZGVsfSIsImltcG9ydCB7Q2FydFNpbXVsYXRpb259IGZyb20gJy4vQ2FydFNpbXVsYXRpb24nXHJcblxyXG4jIE1ldGhvZHMgdG8gcnVuIHRoZSBzaW11bGF0aW9uIGluIGhlYWRsZXNzIG1vZGUgKHRlcm1pbmFsIG9ubHkpLCBvciBhdHRhY2hlZCB0byBhIGNhbnZhcyAoR3JhcGhpY2FsKS5cclxuY2xhc3MgUnVubmVyXHJcblx0IyBSdW4gdGhlIHNpbXVsYXRpb24gaGVhZGxlc3NseSAoaW4gdGVybWluYWwpLlxyXG5cdCMgXHJcblx0IyBUaGUgc2ltdWxhdGlvbiBpcyBydW4gdW50aWwgdGhlIHN0aWNrIGlzIGRyb3BwZWQgb2ZmLlxyXG5cdCMgXHJcblx0IyBAcGFyYW0gW0Z1bmN0aW9uXSBsb2dpY0NhbGxiYWNrIENhbGxiYWNrIG1ldGhvZCB0byBwcm9jZXNzIHRoZSBjYXJ0IGxvZ2ljLlxyXG5cdCMgQHBhcmFtIFtudW1iZXJdIHNjb3JlTGltaXQgSG93IG11Y2ggdGltZSB0byBzaW11bGF0ZSBpbiB0aGUgbGltaXQgKHByZXZlbnQgaW5maW5pdGUgcnVuKS5cclxuXHQjIEBwYXJhbSBbYm9vbGVhbl0gbG9nUGVyZm9ybWFuY2UgSWYgdHJ1ZSBjb25zb2xlIGxvZ3Mgd2l0aCBwZXJmb3JtYW5jZSBvZiB0aGUgc2ltdWxhdGlvbiBhcmUgcHJpbnRlZCBvdXQuXHJcblx0IyBAcmV0dXJucyBbbnVtYmVyXSBSZXR1cm5zIHRoZSBhbW1vdW50IG9mIHBvaW50cyBhY2N1bXVsYXRlZCBkdXJpbmcgdGhlIHNpbXVsYXRpb24uXHJcblx0QHJ1bkhlYWRsZXNzOiAobG9naWNDYWxsYmFjaywgc2NvcmVMaW1pdCwgbG9nUGVyZm9ybWFuY2UpIC0+XHJcblx0XHRzY29yZUxpbWl0ID0gaWYgc2NvcmVMaW1pdCAhPSB1bmRlZmluZWQgdGhlbiBzY29yZUxpbWl0IGVsc2UgSW5maW5pdHlcclxuXHJcblx0XHRjYXJ0ID0gbmV3IENhcnRTaW11bGF0aW9uKClcclxuXHRcdGZyZXF1ZW5jeSA9IDEgLyA2MFxyXG5cclxuXHRcdGlmIGxvZ1BlcmZvcm1hbmNlXHJcblx0XHRcdHRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKVxyXG5cclxuXHRcdHdoaWxlICFjYXJ0LmdhbWVPdmVyIGFuZCBjYXJ0LnNjb3JlIDwgc2NvcmVMaW1pdFxyXG5cdFx0XHRpZiBsb2dpY0NhbGxiYWNrICE9IHVuZGVmaW5lZFxyXG5cdFx0XHRcdGxvZ2ljQ2FsbGJhY2soY2FydClcclxuXHRcdFx0XHJcblx0XHRcdGNhcnQudXBkYXRlKGZyZXF1ZW5jeSlcclxuXHRcdFxyXG5cdFx0aWYgbG9nUGVyZm9ybWFuY2VcclxuXHRcdFx0ZW5kID0gcGVyZm9ybWFuY2Uubm93KClcclxuXHRcdFx0Y29uc29sZS5sb2coJyAtIFNpbXVsYXRpb24gZW5kZWQgd2l0aCAnICsgY2FydC5zY29yZSArICcgcG9pbnRzLCB0b29rICcgKyAoZW5kIC0gdGltZSkgKyAnLicpXHJcblxyXG5cdFx0cmV0dXJuIGNhcnQuc2NvcmVcclxuXHJcblx0IyBSdW4gdGhlIHNpbXVsYXRpb24gd2l0aCB2aXN1YWxpemF0aW9uLCAoYXR0YWNoZWQgdG8gYSBjYW52YXMpLlxyXG5cdCMgXHJcblx0IyBSdW5zIGF0IHJlYWwgdGltZSBzcGVlZCBmb3IgdmlzdWFsaXphdGlvbiBwdXJwb3Nlcy5cclxuXHQjIFxyXG5cdCMgQHBhcmFtIFtFbGVtZW50XSBjYW52YXMgQ2FudmFzIGVsZW1lbnQgd2hlcmUgdGhlIGludGVyZmFjZSBpcyBkcmF3bi5cclxuXHQjIEBwYXJhbSBbRnVuY3Rpb25dIG9uSXRlcmF0aW9uIE1ldGhvZCBjYWxsZWQgZXZlcnkgaXRlcmF0aW9uIG9mIHRoZSBzaW11bGF0aW9uIHRvIGNvbnRyb2wgdGhlIGNhcnQuXHJcblx0IyBAcGFyYW0gW0Z1bmN0aW9uXSBvbkdhbWVPdmVyIE1ldGhvZCBjYWxsZWQgd2hlbiB0aGUgc2ltdWxhdGlvbiBlbmRzLlxyXG5cdEBydW5HcmFwaGljYWw6IChjYW52YXMsIG9uSXRlcmF0aW9uLCBvbkdhbWVPdmVyKSAtPlxyXG5cdFx0Y2FydCA9IG5ldyBDYXJ0U2ltdWxhdGlvbigpXHJcblx0XHRjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJylcclxuXHRcdG1heFNjb3JlID0gMFxyXG5cclxuXHRcdCMgVGltZSBvZiB0aGUgbGFzdCBmcmFtZSBpbiBtc1xyXG5cdFx0bGFzdCA9IDA7XHJcblxyXG5cdFx0dXBkYXRlID0gKHRpbWUpIC0+XHJcblx0XHRcdGlmIHRpbWVcclxuXHRcdFx0XHRkZWx0YSA9ICh0aW1lIC0gbGFzdCkgLyAxMDAwLjBcclxuXHRcdFx0XHRsYXN0ID0gdGltZVxyXG5cdFx0XHRlbHNlXHJcblx0XHRcdFx0ZGVsdGEgPSAwXHJcblxyXG5cdFx0XHRpZiBvbkl0ZXJhdGlvbiAhPSB1bmRlZmluZWRcclxuXHRcdFx0XHRvbkl0ZXJhdGlvbihjYXJ0KVxyXG5cclxuXHRcdFx0Y2FydC51cGRhdGUoZGVsdGEpXHJcblxyXG5cdFx0XHRpZiBjYXJ0LmdhbWVPdmVyXHJcblx0XHRcdFx0aWYgb25HYW1lT3ZlciAhPSB1bmRlZmluZWRcclxuXHRcdFx0XHRcdG9uR2FtZU92ZXIoY2FydCwgbWF4U2NvcmUpXHJcblxyXG5cdFx0XHRcdGlmIGNhcnQuc2NvcmUgPiBtYXhTY29yZSBcclxuXHRcdFx0XHRcdG1heFNjb3JlID0gY2FydC5zY29yZVxyXG5cclxuXHRcdFx0XHRjYXJ0LnJlc2V0KClcclxuXHRcdFx0XHJcblx0XHRcdCMgUmVuZGVyXHJcblx0XHRcdGNvbnRleHQuc2F2ZSgpXHJcblx0XHRcdGNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodClcclxuXHRcdFx0XHJcblx0XHRcdCMgVGV4dCBpbiB0aGUgY2FudmFzXHJcblx0XHRcdGNvbnRleHQuZm9udCA9ICcxNXB4IEFyaWFsJ1xyXG5cdFx0XHRjb250ZXh0LnRleHRBbGlnbiA9ICdsZWZ0J1xyXG5cdFx0XHRjb250ZXh0LmZpbGxUZXh0KCdQb2ludHM6ICcgKyBjYXJ0LnNjb3JlLCAxMCwgMjApXHJcblx0XHRcdGNvbnRleHQuZmlsbFRleHQoJ01heDogJyArIG1heFNjb3JlLCAxMCwgNDApXHJcblxyXG5cdFx0XHQjIFRyYW5zZm9ybVxyXG5cdFx0XHRjb250ZXh0LnRyYW5zZm9ybSgxLCAwLCAwLCAtMSwgMCwgY2FudmFzLmhlaWdodClcclxuXHRcdFx0Y29udGV4dC50cmFuc2xhdGUoY2FudmFzLndpZHRoIC8gMiwgY2FudmFzLmhlaWdodCAvIDIpXHJcblx0XHRcdGNhcnQuZHJhdyhjb250ZXh0KVxyXG5cclxuXHRcdFx0Y29udGV4dC5yZXN0b3JlKClcclxuXHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKHVwZGF0ZSlcclxuXHJcblx0XHR1cGRhdGUoKVxyXG5cclxuZXhwb3J0IHtSdW5uZXJ9XHJcbiIsImltcG9ydCB7UnVubmVyfSBmcm9tICcuL1J1bm5lcidcclxuaW1wb3J0IHtMaW5lYXJNb2RlbH0gZnJvbSAnLi9MaW5lYXJNb2RlbCdcclxuXHJcbiMgTWV0aG9kcyBmb3IgdHJhaW5pbmcgb2YgdGhlIGNhcnQgbW9kZWwuXHJcbiNcclxuIyBUcmFpbmluZyBwcm9kdWNlcyBhIGxpbmVhciBtb2RlbCBvZiB0aGUgY2FydCwgdGhhdCBjYW4gYmUgdXNlZCB0byBjb250cm9sIHRoZSBzaW11bGF0aW9uLlxyXG5jbGFzcyBMaW5lYXJNb2RlbFRyYWluXHJcblx0IyBUcmFpbiB0aGUgbW9kZWwgb2YgdGhlIGNhcnQgaXRlcmF0aXZlbGx5LlxyXG5cdCMgXHJcblx0IyBVc2VzIGEgc2Vhc29uYWwgdHJhaW5pbmcgYXBwcm9hY2ggZm9yIHdpY2ggbWFueSBlcG9jaHMgYXJlIGV4ZWN1dGVkIGFuZCB0aGUgYmVzdCBmcm9tIGVhY2ggZXBvY2ggaXMgc2VsZWN0ZWQgYXMgYmFzZWQgZm9yIHRoZSBuZXh0LlxyXG5cdCMgXHJcblx0IyBAcGFyYW0gW251bWJlcl0gZXBvY2hzIE51bWJlciBvZiBpdGVyYXRpb25zL2Vwb2NocyB0byBzaW11bGF0ZS5cclxuXHQjIEBwYXJhbSBbbnVtYmVyXSBpdGVyYXRpb25zIE51bWJlciBvZiB2YXJpYXRpb25zIHRlc3RlZCBpbiBlYWNoIGVwb2NoLlxyXG5cdCMgQHBhcmFtIFtudW1iZXJdIHJ1bnMgSG93IG1hbnkgdGltZXMgdG8gcnVuIGVhY2ggdmFyaWF0aW9uIHRvIGdldCBhbiBhdmVyYWdlIHBlcmZvcm1hbmNlLlxyXG5cdCMgQHJldHVybnMge0xpbmVhck1vZGVsfSBUcmFpbmVkIG1vZGVsIHRoYXQgY2FuIGJlIHVzZWQgdG8gY29udHJvbCB0aGUgc2ltdWxhdGlvbi5cclxuXHRAdHJhaW5JdGVyYXRpdmU6IChlcG9jaHMsIGl0ZXJhdGlvbnMsIHJ1bnMsIHNjb3JlTGltaXQpIC0+XHJcblx0XHRlcG9jaHMgPSBpZiBlcG9jaHMgIT0gdW5kZWZpbmVkIHRoZW4gZXBvY2hzIGVsc2UgNTAwXHJcblx0XHRpdGVyYXRpb25zID0gaWYgaXRlcmF0aW9ucyAhPSB1bmRlZmluZWQgdGhlbiBpdGVyYXRpb25zIGVsc2UgMTAwXHJcblx0XHRydW5zID0gaWYgcnVucyAhPSB1bmRlZmluZWQgdGhlbiBydW5zIGVsc2UgNVxyXG5cclxuXHRcdCMgSWYgdGhlIG1vZGVsIHJlYWNoZXMgdGhpcyBsZXZlbCBvZiBwZXJmb3JtYW5jZSB0aGUgdHJhaW5pbmcgaXMgc3RvcHBlZC5cclxuXHRcdHNjb3JlTGltaXQgPSBpZiBzY29yZUxpbWl0ICE9IHVuZGVmaW5lZCB0aGVuIHNjb3JlTGltaXQgZWxzZSAyMDAwLjBcclxuXHJcblx0XHRjb25zb2xlLmxvZygnIC0gVHJhaW5pbmcgcHJvY2VzcyBzdGFydGluZy4gJywge2Vwb2NocywgaXRlcmF0aW9ucywgcnVuc30pXHJcblxyXG5cdFx0YmVzdE1vZGVsID0gbmV3IExpbmVhck1vZGVsKClcclxuXHRcdGJlc3RTY29yZSA9IExpbmVhck1vZGVsVHJhaW4udGVzdE1vZGVsKGJlc3RNb2RlbCwgcnVucywgc2NvcmVMaW1pdClcclxuXHJcblx0XHRqaXR0ZXIgPSAxLjBcclxuXHRcdFxyXG5cdFx0IyBFcG9jaFxyXG5cdFx0ZSA9IDBcclxuXHRcdHdoaWxlIGUgPCBlcG9jaHNcclxuXHRcdFx0Y29uc29sZS5sb2coJyAtIFJ1bm5pbmcgZXBvY2ggJywgZSwgJyBzY29yZSAnLCBiZXN0U2NvcmUpXHJcblxyXG5cdFx0XHRlcG9jaE1vZGVsID0gbnVsbFxyXG5cdFx0XHRlcG9jaFNjb3JlID0gMFxyXG5cclxuXHRcdFx0IyBOdW1iZXIgb2YgaXRlcmF0aW9ucyBwZXIgZXBvY2hcclxuXHRcdFx0aSA9IDBcclxuXHRcdFx0d2hpbGUgaSA8IGl0ZXJhdGlvbnNcclxuXHRcdFx0XHRtb2RlbCA9IGJlc3RNb2RlbC5jbG9uZSgpXHJcblx0XHRcdFx0bW9kZWwuaml0dGVyKGppdHRlcilcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRwb2ludHMgPSBMaW5lYXJNb2RlbFRyYWluLnRlc3RNb2RlbChtb2RlbCwgcnVucywgc2NvcmVMaW1pdClcclxuXHRcdFx0XHRpZiBwb2ludHMgPiBlcG9jaFNjb3JlXHJcblx0XHRcdFx0XHRlcG9jaE1vZGVsID0gbW9kZWxcclxuXHRcdFx0XHRcdGVwb2NoU2NvcmUgPSBwb2ludHNcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpKytcclxuXHJcblx0XHRcdGlmIGVwb2NoU2NvcmUgPj0gYmVzdFNjb3JlXHJcblx0XHRcdFx0YmVzdE1vZGVsID0gZXBvY2hNb2RlbFxyXG5cdFx0XHRcdGJlc3RTY29yZSA9IGVwb2NoU2NvcmVcclxuXHJcblx0XHRcdGlmIGJlc3RTY29yZSA+PSBzY29yZUxpbWl0XHJcblx0XHRcdFx0YnJlYWtcclxuXHRcdFx0ZSsrXHJcblxyXG5cdFx0Y29uc29sZS5sb2coJyAtIFRyYWluaW5nIGZpbmlzaGVkIHdpdGggc2NvcmUgJywgYmVzdFNjb3JlLCAnIG1vZGVsICcsIGJlc3RNb2RlbClcclxuXHRcdHJldHVybiBiZXN0TW9kZWxcclxuXHJcblx0IyBGdWxseSByYW5kb21pemVkIHRyYWluaW5nLCB0ZXN0IG1hbnkgcGFyYW1ldGVycyBhbmQgc2VsZWN0IHRoZSBiZXN0IGZyb20gYWxsLlxyXG5cdCMgXHJcblx0IyBAcGFyYW0gW251bWJlcl0gaXRlcmF0aW9ucyBOdW1iZXIgb2YgdmFyaWF0aW9ucyB0ZXN0ZWQgaW4gZWFjaCBlcG9jaC5cclxuXHQjIEBwYXJhbSBbbnVtYmVyXSBydW5zIEhvdyBtYW55IHRpbWVzIHRvIHJ1biBlYWNoIHZhcmlhdGlvbiB0byBnZXQgYW4gYXZlcmFnZSBwZXJmb3JtYW5jZS5cclxuXHQjIEByZXR1cm5zIHtMaW5lYXJNb2RlbH0gVHJhaW5lZCBtb2RlbCB0aGF0IGNhbiBiZSB1c2VkIHRvIGNvbnRyb2wgdGhlIHNpbXVsYXRpb24uXHJcblx0QHRyYWluUmFuZG9tOiAoaXRlcmF0aW9ucywgcnVucywgc2NvcmVMaW1pdCkgLT5cclxuXHRcdGl0ZXJhdGlvbnMgPSBpZiBpdGVyYXRpb25zICE9IHVuZGVmaW5lZCB0aGVuIGl0ZXJhdGlvbnMgZWxzZSAxZTVcclxuXHRcdHJ1bnMgPSBpZiBydW5zICE9IHVuZGVmaW5lZCB0aGVuIHJ1bnMgZWxzZSA1XHJcblxyXG5cdFx0IyBJZiB0aGUgbW9kZWwgcmVhY2hlcyB0aGlzIGxldmVsIG9mIHBlcmZvcm1hbmNlIHRoZSB0cmFpbmluZyBpcyBzdG9wcGVkLlxyXG5cdFx0c2NvcmVMaW1pdCA9IGlmIHNjb3JlTGltaXQgIT0gdW5kZWZpbmVkIHRoZW4gc2NvcmVMaW1pdCBlbHNlIDIwMDAuMFxyXG5cclxuXHRcdGNvbnNvbGUubG9nKCcgLSBUcmFpbmluZyBwcm9jZXNzIHN0YXJ0aW5nLiAnLCB7aXRlcmF0aW9ucywgcnVuc30pXHJcblxyXG5cdFx0YmVzdE1vZGVsID0gbnVsbFxyXG5cdFx0YmVzdFNjb3JlID0gMFxyXG5cdFx0XHJcblx0XHRqaXR0ZXIgPSAyLjBcclxuXHJcblx0XHQjIFRlc3RzIHBlciBlcG9jaFxyXG5cdFx0aSA9IDBcclxuXHRcdHdoaWxlIGkgPCBpdGVyYXRpb25zXHJcblx0XHRcdG1vZGVsID0gbmV3IExpbmVhck1vZGVsKClcclxuXHRcdFx0bW9kZWwuaml0dGVyKGppdHRlcilcclxuXHRcdFx0XHJcblx0XHRcdHNjb3JlID0gTGluZWFyTW9kZWxUcmFpbi50ZXN0TW9kZWwobW9kZWwsIHJ1bnMsIHNjb3JlTGltaXQpXHJcblx0XHRcdGlmIHNjb3JlID4gYmVzdFNjb3JlXHJcblx0XHRcdFx0YmVzdE1vZGVsID0gbW9kZWxcclxuXHRcdFx0XHRiZXN0U2NvcmUgPSBzY29yZVxyXG5cclxuXHRcdFx0Y29uc29sZS5sb2coJyAtIEl0ZXJhdGlvbiAnLCBpLCAnIHNjb3JlICcsIGJlc3RTY29yZSlcclxuXHJcblx0XHRcdGlmIGJlc3RTY29yZSA+PSBzY29yZUxpbWl0XHJcblx0XHRcdFx0YnJlYWtcclxuXHRcdFx0XHJcblx0XHRcdGkrK1xyXG5cclxuXHRcdGNvbnNvbGUubG9nKCcgLSBUcmFpbmluZyBmaW5pc2hlZCB3aXRoIHNjb3JlICcsIGJlc3RTY29yZSwgJyBtb2RlbCAnLCBiZXN0TW9kZWwpXHJcblxyXG5cdFx0cmV0dXJuIGJlc3RNb2RlbFxyXG5cclxuXHQjIFJ1biB0aGUgbW9kZWwsIG11bHRpcGxlIHRpbWVzIGFuZCBhdmVyYWdlIHRoZSBwb250dWF0aW9uIG9mIHRoZSBydW5zLlxyXG5cdCMgXHJcblx0IyBAcGFyYW0gW0xpbmVhck1vZGVsXSBtb2RlbCBNb2RlbCB0byBiZSB0ZXN0ZWQuXHJcblx0IyBAcGFyYW0gW251bWJlcl0gcnVucyBOdW1iZXIgb2YgaXRlcmF0aW9ucyB0byB0ZXN0IHRoZSBtb2RlbC5cclxuXHQjIEBwYXJhbSBbbnVtYmVyXSBzY29yZUxpbWl0IElmIHRoZSBzY29yZSBvZiB0aGUgbW9kZWwgZ2V0cyBiZXR0ZXIgdGhhbiB0aGUgbGltaXQgdGhlIHNpbXVsYXRpb24gc3RvcHMuXHJcblx0IyBAcmV0dXJuIHtudW1iZXJ9IFRoZSBhdmVyYWdlIHBlcmZvcm1hbmNlIHNjb3JlIG9mIHRoZSBtb2RlbC5cclxuXHRAdGVzdE1vZGVsOiAobW9kZWwsIHJ1bnMsIHNjb3JlTGltaXQpIC0+XHJcblx0XHRzY29yZSA9IDBcclxuXHRcdHIgPSAwXHJcblx0XHR3aGlsZSByIDwgcnVuc1xyXG5cdFx0XHRjb250cm9sID0gKGNhcnQpIC0+XHJcblx0XHRcdFx0bW9kZWwuY29udHJvbChjYXJ0KVxyXG5cdFx0XHRcdHJldHVyblxyXG5cdFx0XHRcdFxyXG5cdFx0XHRzY29yZSArPSBSdW5uZXIucnVuSGVhZGxlc3MoY29udHJvbCwgc2NvcmVMaW1pdClcclxuXHRcdFx0cisrXHJcblx0XHRcclxuXHRcdHJldHVybiBzY29yZSAvIHJ1bnNcclxuXHJcbmV4cG9ydCB7TGluZWFyTW9kZWxUcmFpbn1cclxuIiwiIyBBdXhpbGlhciBtZXRob2RzIGZvciBmaWxlIG1hbmlwdWxhdGlvbiwgbmV0d29ya2luZywgZXRjXHJcbmNsYXNzIFV0aWxzXHJcblx0IyBXcml0ZSBkYXRhIGludG8gYSBmaWxlLiBVc2VmdWwgdG8gZXhwb3J0IEpTT04gZGF0YS5cclxuXHQjIFxyXG5cdCMgQHBhcmFtIFtzdHJpbmcgfCBvYmplY3RdIGRhdGEgRGF0YSB0byBiZSB3cml0dGVuIHRvIGZpbGUuIFxyXG5cdCMgQHBhcmFtIFtzdHJpbmddIGZuYW1lIE5hbWUgb2YgdGhlIGZpbGUgdG8gYmUgd3JpdHRlbi5cclxuXHRAd3JpdGVGaWxlOiAoZGF0YSwgZm5hbWUpIC0+XHJcblx0XHRpZiB0eXBlb2YgZGF0YSA9PSAnb2JqZWN0J1xyXG5cdFx0XHRkYXRhID0gSlNPTi5zdHJpbmdpZnkoZGF0YSwgbnVsbCwgJ1xcdCcpXHJcblxyXG5cdFx0YmxvYiA9IG5ldyBCbG9iKFtkYXRhXSwge3R5cGU6ICdvY3RldC9zdHJlYW0nfSlcclxuXHRcdFxyXG5cdFx0ZG93bmxvYWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJylcclxuXHRcdGRvd25sb2FkLmRvd25sb2FkID0gZm5hbWVcclxuXHRcdGRvd25sb2FkLmhyZWYgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKVxyXG5cdFx0ZG93bmxvYWQuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xyXG5cclxuXHRcdGRvd25sb2FkLm9uY2xpY2sgPSAoKSAtPlxyXG5cdFx0XHRkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRoaXMpXHJcblx0XHRcdHJldHVyblxyXG5cdFx0XHJcblx0XHRkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRvd25sb2FkKVxyXG5cdFx0XHJcblx0XHRkb3dubG9hZC5jbGljaygpXHJcblx0XHRyZXR1cm5cclxuXHJcblxyXG5cdCMgQ2hvb3NlIGZpbGUgYW5kIHJlYWQgZGF0YSBmcm9tIGl0LlxyXG5cdEByZWFkRmlsZTogKG9uTG9hZCkgLT5cclxuXHRcdGNob29zZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpXHJcblx0XHRjaG9vc2VyLnR5cGUgPSAnZmlsZSdcclxuXHRcdGNob29zZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xyXG5cdFx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjaG9vc2VyKVxyXG5cclxuXHRcdGNob29zZXIub25jaGFuZ2UgPSAoKSAtPlxyXG5cdFx0XHRmaWxlcyA9IGNob29zZXIuZmlsZXNcclxuXHRcdFx0aWYgZmlsZXMubGVuZ3RoID09IDBcclxuXHRcdFx0XHRyZXR1cm5cclxuXHJcblx0XHRcdHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKClcclxuXHRcdFx0cmVhZGVyLm9ubG9hZCA9ICgpIC0+XHJcblx0XHRcdFx0dGV4dCA9IHJlYWRlci5yZXN1bHRcclxuXHRcdFx0XHRvbkxvYWQodGV4dClcclxuXHRcdFx0XHJcblx0XHRcdHJlYWRlci5yZWFkQXNUZXh0KGZpbGVzWzBdKVxyXG5cdFx0XHRkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGNob29zZXIpXHJcblxyXG5cdFx0Y2hvb3Nlci5jbGljaygpXHJcblxyXG5leHBvcnQge1V0aWxzfSIsImltcG9ydCB7VXRpbHN9IGZyb20gJy4vVXRpbHMnXHJcblxyXG5cclxuIyBEYXRhIHJlY29yZGVyIGNhbiBiZSB1c2VkIHRvIHJlY29yZCBkYXRhIGZyb20gYSBnYW1lIHNlc3Npb24uXHJcbiNcclxuIyBUaGF0IGRhdGEgY2FuIHRoZW4gYmUgdXNlZCBmb3IgdHJhaW5pbmcgb2YgbW9kZWxzLlxyXG5jbGFzcyBEYXRhUmVjb3JkZXJcclxuXHRjb25zdHJ1Y3RvcjogKCkgLT5cclxuXHRcdCMgQWN0aXZlIHN0YXRlIG9mIHRoZSBkYXRhIHJlY29yZGVyXHJcblx0XHRAYWN0aXZlID0gdHJ1ZVxyXG5cdFx0XHJcblx0XHQjIEN1cnJlbnQgZGF0YSBiZWluZyByZWNvcmRlZFxyXG5cdFx0QGRhdGEgPSBbXVxyXG5cdFx0XHJcblx0XHQjIEJlc3Qgc2NvcmUgcmVjb3JkZWQgdW50aWwgbm93XHJcblx0XHRAYmVzdFNjb3JlID0gMFxyXG5cclxuXHRcdCMgQmVzdCBkYXRhc2V0IHJlY29yZGVkIHV0aWwgbm93XHJcblx0XHRAYmVzdERhdGEgPSBbXVxyXG5cclxuXHJcblx0IyBHZXQgdGhlIGJlc3QgZGF0YSBvYnRhaW5lZCBmcm9tIHRoZSByZWNvcmRlci5cclxuXHRnZXREYXRhOiAoKSAtPlxyXG5cdFx0cmV0dXJuIEBiZXN0RGF0YVxyXG5cclxuXHQjIEVuZCByZWNvcmRpbmcgc2Vzc2lvbiB0aGUgc2NvcmUgd2lsbCBiZSBjb21wYXJlZCB3aXRoIHByZXZpb3VzIGJlc3Qgc2Vzc2lvbiB0byBkZWNpZGUgd2hhdCBkYXRhIHRvIGtlZXAuXHJcblx0ZW5kOiAoc2NvcmUpIC0+XHJcblx0XHRpZiBAYWN0aXZlXHJcblx0XHRcdGlmIHNjb3JlID4gQGJlc3RTY29yZVxyXG5cdFx0XHRcdEBiZXN0RGF0YSA9IEBkYXRhXHJcblx0XHRcdFx0QGJlc3RTY29yZSA9IHNjb3JlXHJcblx0XHRcdEBkYXRhID0gW11cclxuXHJcblx0IyBSZWNvcmQgc3RhdGUgb2YgYSBzaW11bGF0aW9uIGFuZCB0aGUgY29udHJvbCBhY3Rpb24gc3RhdGVcclxuXHRyZWNvcmQ6IChjYXJ0KSAtPlxyXG5cdFx0aWYgQGFjdGl2ZVxyXG5cdFx0XHRAZGF0YS5wdXNoKHtcclxuXHRcdFx0XHRpbnB1dDogW2NhcnQudmVsb2NpdHksIGNhcnQuYW5nbGUsIGNhcnQucG9zaXRpb25dXHJcblx0XHRcdFx0b3V0cHV0OiBbY2FydC5sZWZ0UHJlc3NlZCwgY2FydC5yaWdodFByZXNzZWRdXHJcblx0XHRcdH0pXHJcblxyXG5leHBvcnQge0RhdGFSZWNvcmRlcn0iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07Il0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsInNlbGYiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsIlZlY3RvcjIiLCJjb25zdHJ1Y3RvciIsIngiLCJ5IiwiQm94IiwibWluIiwibWF4IiwiZ2V0U2l6ZSIsImRyYXciLCJjb250ZXh0Iiwic2l6ZSIsImxpbmVXaWR0aCIsInN0cm9rZVJlY3QiLCJMaW5lIiwib3JpZ2luIiwiZW5kIiwiTWF0aCIsInNxcnQiLCJwb3ciLCJiZWdpblBhdGgiLCJtb3ZlVG8iLCJsaW5lVG8iLCJzdHJva2UiLCJDYXJ0U2ltdWxhdGlvbiIsImJhcnJpZXJEaXN0YW5jZSIsImJveEhhbGZTaXplIiwibW92ZUFjY2VsZXJhdGlvbiIsImxpbWl0QW5nbGUiLCJmcmljdGlvbiIsInBlbmR1bHVtR3Jhdml0eSIsInBlbmR1bHVtTW9tZW50dW0iLCJjYXJ0IiwicGVuZHVsdW0iLCJiYXJyaWVyTGVmdCIsImJhcnJpZXJSaWdodCIsInJlc2V0IiwiZ2FtZU92ZXIiLCJzY29yZSIsInBvc2l0aW9uIiwibGVmdFByZXNzZWQiLCJyaWdodFByZXNzZWQiLCJhY2NlbGVyYXRpb24iLCJ2ZWxvY2l0eSIsInJhbmRvbSIsImFuZ2xlIiwidHJhbnNsYXRlIiwic3Ryb2tlU3R5bGUiLCJzaW4iLCJjb3MiLCJ1cGRhdGUiLCJkZWx0YSIsIkxpbmVhck1vZGVsIiwidmVsIiwiTGluZWFyUmVncmVzc2lvbiIsInBvcyIsImUiLCJqaXR0ZXIiLCJzY2FsZSIsImNsb25lIiwibSIsImNvbnRyb2wiLCJ2IiwiZGVjbCIsIm9yaSIsIlJ1bm5lciIsImxvZ2ljQ2FsbGJhY2siLCJzY29yZUxpbWl0IiwibG9nUGVyZm9ybWFuY2UiLCJ0aW1lIiwicGVyZm9ybWFuY2UiLCJub3ciLCJjb25zb2xlIiwibG9nIiwiY2FudmFzIiwib25JdGVyYXRpb24iLCJvbkdhbWVPdmVyIiwiZ2V0Q29udGV4dCIsIm1heFNjb3JlIiwibGFzdCIsInNhdmUiLCJjbGVhclJlY3QiLCJ3aWR0aCIsImhlaWdodCIsImZvbnQiLCJ0ZXh0QWxpZ24iLCJmaWxsVGV4dCIsInRyYW5zZm9ybSIsInJlc3RvcmUiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJMaW5lYXJNb2RlbFRyYWluIiwiZXBvY2hzIiwiaXRlcmF0aW9ucyIsInJ1bnMiLCJiZXN0TW9kZWwiLCJiZXN0U2NvcmUiLCJ0ZXN0TW9kZWwiLCJlcG9jaE1vZGVsIiwiZXBvY2hTY29yZSIsImkiLCJtb2RlbCIsInBvaW50cyIsInIiLCJydW5IZWFkbGVzcyIsIlV0aWxzIiwiZGF0YSIsImZuYW1lIiwiSlNPTiIsInN0cmluZ2lmeSIsImJsb2IiLCJCbG9iIiwidHlwZSIsImRvd25sb2FkIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaHJlZiIsIndpbmRvdyIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsInN0eWxlIiwiZGlzcGxheSIsIm9uY2xpY2siLCJib2R5IiwicmVtb3ZlQ2hpbGQiLCJ0aGlzIiwiYXBwZW5kQ2hpbGQiLCJjbGljayIsIm9uTG9hZCIsImNob29zZXIiLCJvbmNoYW5nZSIsImZpbGVzIiwibGVuZ3RoIiwicmVhZGVyIiwiRmlsZVJlYWRlciIsIm9ubG9hZCIsInRleHQiLCJyZXN1bHQiLCJyZWFkQXNUZXh0IiwiRGF0YVJlY29yZGVyIiwiYWN0aXZlIiwiYmVzdERhdGEiLCJnZXREYXRhIiwicmVjb3JkIiwicHVzaCIsImlucHV0Iiwib3V0cHV0Il0sInNvdXJjZVJvb3QiOiIifQ==