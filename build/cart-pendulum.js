!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.CP=e():t.CP=e()}(self,(function(){return(()=>{"use strict";var t,e,i,s,r,n,o,a,h,l,c={d:(t,e)=>{for(var i in e)c.o(e,i)&&!c.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},d={};return c.r(d),c.d(d,{Box:()=>e,CartSimulation:()=>s,DataRecorder:()=>l,Line:()=>i,LinearModel:()=>n,LinearModelTrain:()=>a,LinearRegression:()=>r,Runner:()=>o,Utils:()=>h,Vector2:()=>t}),t=class{constructor(t,e){this.x=t,this.y=e}},e=class{constructor(t,e){this.min=t,this.max=e}getSize(){return new t(this.max.x-this.min.x,this.max.y-this.min.y)}draw(t){var e;return e=this.getSize(),t.lineWidth=3,t.strokeRect(this.min.x,this.min.y,e.x,e.y)}},i=class{constructor(t,e){this.origin=t,this.end=e}size(){return Math.sqrt(Math.pow(this.origin.x-this.end.x,2)+Math.pow(this.origin.y-this.end.y,2))}draw(t){return t.lineWidth=3,t.beginPath(),t.moveTo(this.origin.x,this.origin.y),t.lineTo(this.end.x,this.end.y),t.stroke()}},s=class{constructor(){this.barrierDistance=400,this.boxHalfSize=50,this.moveAcceleration=250,this.limitAngle=.8,this.friction=.6,this.pendulumGravity=1.3,this.pendulumMomentum=.01,this.cart=new e(new t(-this.boxHalfSize,-30),new t(this.boxHalfSize,30)),this.pendulum=new i(new t(0,0),new t(0,100)),this.barrierLeft=new i(new t(-this.barrierDistance,-1e3),new t(-this.barrierDistance,1e3)),this.barrierRight=new i(new t(this.barrierDistance,-1e3),new t(this.barrierDistance,1e3)),this.reset()}reset(){var t;return this.gameOver=!1,this.score=0,this.position=0,this.leftPressed=!1,this.rightPressed=!1,this.acceleration=0,this.velocity=100*(2*Math.random()-1),this.velocity+=null!=(t=this.velocity<0)?t:-{50:50},this.angle=0}draw(t){return this.barrierLeft.draw(t),this.barrierRight.draw(t),t.translate(this.position,0),t.strokeStyle="#FF0000",t.lineWidth=1,t.beginPath(),t.moveTo(100*Math.sin(-this.limitAngle),100*Math.cos(-this.limitAngle)),t.lineTo(0,0),t.lineTo(100*Math.sin(this.limitAngle),100*Math.cos(this.limitAngle)),t.stroke(),t.strokeStyle="#000000",t.lineWidth=3,this.pendulum.end.x=100*Math.sin(this.angle),this.pendulum.end.y=100*Math.cos(this.angle),this.pendulum.draw(t),this.cart.draw(t)}update(t){if(!this.gameOver)return this.leftPressed?this.acceleration=-this.moveAcceleration:this.rightPressed?this.acceleration=this.moveAcceleration:this.acceleration=0,this.velocity+=this.acceleration*t,this.velocity*=1-this.friction*t,this.position+=this.velocity*t,this.angle+=this.angle*this.pendulumGravity*t,this.angle-=this.velocity*this.pendulumMomentum*t,this.score+=t,console.log(t,this.velocity,this.angle,this.score,this.position),(this.angle>this.limitAngle||this.angle<-this.limitAngle)&&(this.gameOver=!0),this.position+this.boxHalfSize>this.barrierDistance||this.position-this.boxHalfSize<-this.barrierDistance?this.gameOver=!0:void 0}},r=class t{constructor(t,e){this.ori=t,this.decl=e}jitter(t){return this.ori+=(Math.random()-.5)*t,this.decl+=(Math.random()-.5)*t}clone(){return new t(this.ori,this.decl)}},n=class t{constructor(){this.vel=new r(0,0),this.angle=new r(0,0),this.pos=new r(0,0),this.e=0}jitter(t){return this.vel.jitter(t),this.angle.jitter(t),this.pos.jitter(t),this.e+=(Math.random()-.5)*t}clone(){var e;return(e=new t).vel=this.pos.clone(),e.angle=this.pos.clone(),e.pos=this.pos.clone(),e.e=this.e,e}control(t){var e,i;return e=this.vel.decl*t.velocity+this.vel.ori,i=this.angle.decl*t.angle+this.angle.ori+e+(this.pos.decl*t.position+this.pos.ori),t.leftPressed=i<this.e,t.rightPressed=i>this.e}},o=class{static runHeadless(t,e,i){var r,n,o;for(e=void 0!==e?e:Infinity,r=new s,i&&(o=performance.now());!r.gameOver&&r.score<e;)void 0!==t&&t(r),r.update(.016666666666666666);return i&&(n=performance.now(),console.log(" - Simulation ended with "+r.score+" points, took "+(n-o)+".")),r.score}static runGraphical(t,e,i){var r,n,o,a,h;return r=new s,n=t.getContext("2d"),a=0,o=0,(h=function(s){var l;return s?(l=(s-o)/1e3,o=s):l=0,void 0!==e&&e(r),r.update(l),r.gameOver&&(void 0!==i&&i(r,a),r.score>a&&(a=r.score),r.reset()),n.save(),n.clearRect(0,0,t.width,t.height),n.font="15px Arial",n.textAlign="left",n.fillText("Points: "+r.score,10,20),n.fillText("Max: "+a,10,40),n.transform(1,0,0,-1,0,t.height),n.translate(t.width/2,t.height/2),r.draw(n),n.restore(),requestAnimationFrame(h)})()}},a=class t{static trainIterative(e,i,s,r){var o,a,h,l,c,d,u,g;for(e=void 0!==e?e:500,i=void 0!==i?i:100,s=void 0!==s?s:5,r=void 0!==r?r:2e3,console.log(" - Training process starting. ",{epochs:e,iterations:i,runs:s}),o=new n,a=t.testModel(o,s,r),h=0;h<e;){for(console.log(" - Running epoch ",h," score ",a),l=null,c=0,d=0;d<i;)(u=o.clone()).jitter(1),(g=t.testModel(u,s,r))>c&&(l=u,c=g),d++;if(c>=a&&(o=l,a=c),a>=r)break;h++}return console.log(" - Training finished with score ",a," model ",o),o}static trainRandom(e,i,s){var r,o,a,h,l;for(e=void 0!==e?e:1e5,i=void 0!==i?i:5,s=void 0!==s?s:2e3,console.log(" - Training process starting. ",{iterations:e,runs:i}),r=null,o=0,a=0;a<e&&((h=new n).jitter(2),(l=t.testModel(h,i,s))>o&&(r=h,o=l),console.log(" - Iteration ",a," score ",o),!(o>=s));)a++;return console.log(" - Training finished with score ",o," model ",r),r}static testModel(t,e,i){var s,r,n;for(n=0,r=0;r<e;)s=function(e){t.control(e)},n+=o.runHeadless(s,i),r++;return n/e}},h=class{static writeFile(t,e){var i,s;"object"==typeof t&&(t=JSON.stringify(t,null,"\t")),i=new Blob([t],{type:"octet/stream"}),(s=document.createElement("a")).download=e,s.href=window.URL.createObjectURL(i),s.style.display="none",s.onclick=function(){document.body.removeChild(this)},document.body.appendChild(s),s.click()}static readFile(t){var e;return(e=document.createElement("input")).type="file",e.style.display="none",document.body.appendChild(e),e.onchange=function(){var i,s;if(0!==(i=e.files).length)return(s=new FileReader).onload=function(){var e;return e=s.result,t(e)},s.readAsText(i[0]),document.body.removeChild(e)},e.click()}},l=class{constructor(){this.active=!0,this.data=[],this.bestScore=0,this.bestData=[]}getData(){return this.bestData}end(t){if(this.active)return t>this.bestScore&&(this.bestData=this.data,this.bestScore=t),this.data=[]}record(t){if(this.active)return this.data.push({input:[t.velocity,t.angle,t.position],output:[t.leftPressed,t.rightPressed]})}},d})()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUN6QkYsU0FBV04sRUFDcEJNLEVBQVNHLEtBQU9DLE9BQU9DLElBQUlDLGdCQUFnQlQsR0FDM0NHLEVBQVNPLE1BQU1DLFFBQVUsT0FFekJSLEVBQVNTLFFBQVUsV0FDbEJSLFNBQVNTLEtBQUtDLFlBQVlDLE9BRzNCWCxTQUFTUyxLQUFLRyxZQUFZYixHQUUxQkEsRUFBU2MsUUFLQyxnQkFBQ0MsR0FDYixNLE9BQUVDLEVBQVVmLFNBQVNDLGNBQWMsVUFDekJILEtBQU8sT0FDZmlCLEVBQVFULE1BQU1DLFFBQVUsT0FDeEJQLFNBQVNTLEtBQUtHLFlBQVlHLEdBRTFCQSxFQUFRQyxTQUFXLFdBQ3JCLFFBQ0csR0FBbUIsS0FEbkJDLEVBQVFGLEVBQVFFLE9BQ1BDLE8sT0FHVEMsRUFBUyxJQUFJQyxZQUNOQyxPQUFTLFdBQ25CLE0sT0FBSUMsRUFBT0gsRUFBT0ksT0FDZFQsRUFBT1EsSUFFUkgsRUFBT0ssV0FBV1AsRUFBTSxJQUN4QmpCLFNBQVNTLEtBQUtDLFlBQVlLLElBRTNCQSxFQUFRRixVQ3pDSlksRUFBTixNQUNDeEksY0FFQyxLQUFDeUksUUFBUyxFQUdWLEtBQUNsQyxLQUFPLEdBR1IsS0FBQ1YsVUFBWSxFQUdiLEtBQUM2QyxTQUFXLEdBSWJDLFVBQ0MsT0FBTyxLQUFDRCxTQUdUNUgsSUFBTXNCLEdBQ0wsR0FBRyxLQUFDcUcsTyxPQUNBckcsRUFBUSxLQUFDeUQsWUFDWCxLQUFDNkMsU0FBVyxLQUFDbkMsS0FDYixLQUFDVixVQUFZekQsR0FDZCxLQUFDbUUsS0FBTyxHQUdWcUMsT0FBUzlHLEdBQ1IsR0FBRyxLQUFDMkcsTyxPQUNILEtBQUNsQyxLQUFLc0MsS0FBSyxDQUNWQyxNQUFPLENBQUNoSCxFQUFLVyxTQUFVWCxFQUFLYSxNQUFPYixFQUFLTyxVQUN4QzBHLE9BQVEsQ0FBQ2pILEVBQUtRLFlBQWFSLEVBQUtTLGtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQ1Avd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL0NQL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL0NQLy4vc291cmNlL1ZlY3RvcjIuY29mZmVlIiwid2VicGFjazovL0NQLy4vc291cmNlL0JveC5jb2ZmZWUiLCJ3ZWJwYWNrOi8vQ1AvLi9zb3VyY2UvTGluZS5jb2ZmZWUiLCJ3ZWJwYWNrOi8vQ1AvLi9zb3VyY2UvQ2FydFNpbXVsYXRpb24uY29mZmVlIiwid2VicGFjazovL0NQLy4vc291cmNlL0xpbmVhclJlZ3Jlc3Npb24uY29mZmVlIiwid2VicGFjazovL0NQLy4vc291cmNlL0xpbmVhck1vZGVsLmNvZmZlZSIsIndlYnBhY2s6Ly9DUC8uL3NvdXJjZS9SdW5uZXIuY29mZmVlIiwid2VicGFjazovL0NQLy4vc291cmNlL0xpbmVhck1vZGVsVHJhaW4uY29mZmVlIiwid2VicGFjazovL0NQLy4vc291cmNlL1V0aWxzLmNvZmZlZSIsIndlYnBhY2s6Ly9DUC8uL3NvdXJjZS9EYXRhUmVjb3JkZXIuY29mZmVlIiwid2VicGFjazovL0NQL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9DUC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL0NQL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiQ1BcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wiQ1BcIl0gPSBmYWN0b3J5KCk7XG59KShzZWxmLCBmdW5jdGlvbigpIHtcbnJldHVybiAiLCIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiY2xhc3MgVmVjdG9yMlxyXG5cdCMgMkQgVmVjdG9yIG9iamVjdCByZXByZXNlbnRlZCBieSB4IGFuZCB5IGNvb3JkaW5hdGVzLlxyXG5cdCMgXHJcblx0IyBAcGFyYW0gW251bWJlcl0geCBcclxuXHQjIEBwYXJhbSBbbnVtYmVyXSB5IFxyXG5cdGNvbnN0cnVjdG9yOiAoeCwgeSkgLT4gXHJcblx0XHRAeCA9IHhcclxuXHRcdEB5ID0geVxyXG5cclxuZXhwb3J0IHtWZWN0b3IyfSIsImltcG9ydCB7VmVjdG9yMn0gZnJvbSAnLi9WZWN0b3IyJ1xyXG5cclxuIyBCb3ggaXMgcmVwcmVzZW50ZWQgZnJvbSBhIG1pbmltdW0gYW5kIGEgbWF4aW11bSBwb2ludHMuXHJcbmNsYXNzIEJveFxyXG5cdCMgQHBhcmFtIFtWZWN0b3IyXSBtaW4gXHJcblx0IyBAcGFyYW0gW1ZlY3RvcjJdIG1heCBcclxuXHRjb25zdHJ1Y3RvcjogKG1pbiwgbWF4KSAtPlxyXG5cdFx0QG1pbiA9IG1pblxyXG5cdFx0QG1heCA9IG1heFxyXG5cclxuXHQjIEdldCB0aGUgc2l6ZSBvZiB0aGUgYm94IGluIGEgVmVjdG9yLlxyXG5cdCMgXHJcblx0IyBAcmV0dXJucyBbVmVjdG9yMl0gU2l6ZSBvZiB0aGUgYm94LiBcclxuXHRnZXRTaXplOiAoKSAtPlxyXG5cdFx0cmV0dXJuIG5ldyBWZWN0b3IyKEBtYXgueCAtIEBtaW4ueCwgQG1heC55IC0gQG1pbi55KVxyXG5cclxuXHQjIERyYXcgdGhlIGJveCBpbnRvIGEgY29udGV4dCBmb3IgdmlzdWFsaXphdGlvbi5cclxuXHQjIFxyXG5cdCMgQHBhcmFtIFtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkRdIGNvbnRleHQgXHJcblx0ZHJhdzogKGNvbnRleHQpIC0+XHJcblx0XHRzaXplID0gQGdldFNpemUoKVxyXG5cdFx0Y29udGV4dC5saW5lV2lkdGggPSAzXHJcblx0XHRjb250ZXh0LnN0cm9rZVJlY3QoQG1pbi54LCBAbWluLnksIHNpemUueCwgc2l6ZS55KVxyXG5cclxuZXhwb3J0IHtCb3h9IiwiaW1wb3J0IHtWZWN0b3IyfSBmcm9tICcuL1ZlY3RvcjInXHJcblxyXG4jIExpbmUgYmV0d2VlbiB0d28gcG9pbnRzIChvcmlnaW4gdG8gZW5kKS5cclxuI1xyXG4jIEBwYXJhbSBbVmVjdG9yMl0gb3JpZ2luIFxyXG4jIEBwYXJhbSBbVmVjdG9yMl0gZW5kXHJcbmNsYXNzIExpbmVcclxuXHRjb25zdHJ1Y3RvcjogKG9yaWdpbiwgZW5kKSAtPlxyXG5cdFx0QG9yaWdpbiA9IG9yaWdpblxyXG5cdFx0QGVuZCA9IGVuZFxyXG5cdFxyXG5cdCMgQ2FsY3VsYXRlIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIHRoZSBvcmlnaW4gYW5kIGVuZCBwb2ludHMuXHJcblx0IyBcclxuXHQjIEByZXR1cm5zIHtudW1iZXJ9IFNpemUgb2YgdGhlIGxpbmUuXHJcblx0c2l6ZTogKCkgLT5cclxuXHRcdHJldHVybiBNYXRoLnNxcnQoTWF0aC5wb3coQG9yaWdpbi54IC0gQGVuZC54LCAyKSArIE1hdGgucG93KEBvcmlnaW4ueSAtIEBlbmQueSwgMikpXHJcblxyXG5cdCMgRHJhdyB0aGUgbGluZSBpbnRvIGEgY2FudmFzIDJEIGNvbnRleHQuXHJcblx0IyBcclxuXHQjIEBwYXJhbSBbQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEXSBjb250ZXh0IFxyXG5cdGRyYXc6IChjb250ZXh0KSAtPlxyXG5cdFx0Y29udGV4dC5saW5lV2lkdGggPSAzXHJcblx0XHRjb250ZXh0LmJlZ2luUGF0aCgpXHJcblx0XHRjb250ZXh0Lm1vdmVUbyhAb3JpZ2luLngsIEBvcmlnaW4ueSlcclxuXHRcdGNvbnRleHQubGluZVRvKEBlbmQueCwgQGVuZC55KVxyXG5cdFx0Y29udGV4dC5zdHJva2UoKVxyXG5cclxuXHJcbmV4cG9ydCB7TGluZX0iLCJpbXBvcnQge1ZlY3RvcjJ9IGZyb20gJy4vVmVjdG9yMidcclxuaW1wb3J0IHtMaW5lfSBmcm9tICcuL0xpbmUnXHJcbmltcG9ydCB7Qm94fSBmcm9tICcuL0JveCdcclxuXHJcbiMgQ2FydCBzaW11bGF0aW9uIG9iamVjdCwgdGhhdCBjb250YWlucyB0aGUgZW50aXJlIGxvZ2ljIGZvciB0aGUgc2ltdWxhdGlvbi5cclxuIyBcclxuIyBUaGUgY2FydCBjYW4gYmUgY29uZmlndXJlZFxyXG5jbGFzcyBDYXJ0U2ltdWxhdGlvblxyXG5cdGNvbnN0cnVjdG9yOiAoKSAtPlxyXG5cdFx0IyBEaXN0YW5jZSBvZiB0aGUgYmFycmllcnMgcmVsYXRpdmUgdG8gdGhlIGNlbnRlci5cclxuXHRcdEBiYXJyaWVyRGlzdGFuY2UgPSA0MDBcclxuXHJcblx0XHQjIEhhbGYgdGhlIHNpemUgb2YgdGhlIGNhcnQgYm94LlxyXG5cdFx0QGJveEhhbGZTaXplID0gNTBcclxuXHJcblx0XHQjIEFjY2VsZXJhdGlvbiB1c2VkIGZvciBtb3ZlbWVudCBvZiB0aGUgY2FydCBvbiBrZXkgcHJlc3MuXHJcblx0XHRAbW92ZUFjY2VsZXJhdGlvbiA9IDI1MFxyXG5cclxuXHRcdCMgTGltaXQgYW5nbGUgdGhhdCB0aGUgcGVuZHVsdW0gY2FuIHJlYWNoLlxyXG5cdFx0QGxpbWl0QW5nbGUgPSAwLjhcclxuXHJcblx0XHQjIEZyaWN0aW9uIGFwcGx5ZWQgdG8gdGhlIHZlbG9jaXR5IG9mIHRoZSBjYXJ0XHJcblx0XHRAZnJpY3Rpb24gPSAwLjZcclxuXHJcblx0XHQjIEdyYXZpdHkgZGVmaW5lcyB0aGUgaW50ZW5zaXR5IG9mIHRoZSBmb3JjZSBwdWxsaW5nIHRoZSBwZW5kdWx1bSBkb3duLlxyXG5cdFx0QHBlbmR1bHVtR3Jhdml0eSA9IDEuM1xyXG5cclxuXHRcdCMgUGVuZHVsdW0gbW9tZW50dW0gZGVmaW5lcyBob3cgc3BlZWQgYWZlY3RzIHRoZSBwZW5kdWx1bVxyXG5cdFx0QHBlbmR1bHVtTW9tZW50dW0gPSAwLjAxXHJcblxyXG5cdFx0IyBCb3ggdGhhdCByZXByZXNlbnRzIHRoZSBjYXJ0LlxyXG5cdFx0QGNhcnQgPSBuZXcgQm94KG5ldyBWZWN0b3IyKC1AYm94SGFsZlNpemUsIC0zMCksIG5ldyBWZWN0b3IyKEBib3hIYWxmU2l6ZSwgMzApKVxyXG5cclxuXHRcdCMgTGluZSB0byByZXByZXNlbnQgdGhlIHBlbmR1bHVtXHJcblx0XHRAcGVuZHVsdW0gPSBuZXcgTGluZShuZXcgVmVjdG9yMigwLCAwKSwgbmV3IFZlY3RvcjIoMCwgMTAwKSlcclxuXHRcdFxyXG5cdFx0IyBMZWZ0IGJhcnJpZXIgbGltaXQuXHJcblx0XHRAYmFycmllckxlZnQgPSBuZXcgTGluZShuZXcgVmVjdG9yMigtQGJhcnJpZXJEaXN0YW5jZSwgLTEwMDApLCBuZXcgVmVjdG9yMigtQGJhcnJpZXJEaXN0YW5jZSwgMTAwMCkpXHJcblx0XHRcclxuXHRcdCMgUmlnaHQgYmFycmllciBsaW1pdC5cclxuXHRcdEBiYXJyaWVyUmlnaHQgPSBuZXcgTGluZShuZXcgVmVjdG9yMihAYmFycmllckRpc3RhbmNlLCAtMTAwMCksIG5ldyBWZWN0b3IyKEBiYXJyaWVyRGlzdGFuY2UsIDEwMDApKVxyXG5cdFx0QHJlc2V0KClcclxuXHJcblx0IyBSZXNldCB0aGUgc2ltdWxhdGlvbiBwYXJhbWV0ZXJzIGJhY2sgdG8gYSBpbml0aWFsIHN0YXRlLlxyXG5cdCMgXHJcblx0IyBUaGUgaW5pdGlhbCB2ZWxvY2l0eSBvZiB0aGUgY2FydCBpcyByYW5kb21pemVkLlxyXG5cdHJlc2V0OiAoKSAtPlxyXG5cdFx0QGdhbWVPdmVyID0gZmFsc2VcclxuXHRcdEBzY29yZSA9IDBcclxuXHRcdEBwb3NpdGlvbiA9IDBcclxuXHRcdEBsZWZ0UHJlc3NlZCA9IGZhbHNlXHJcblx0XHRAcmlnaHRQcmVzc2VkID0gZmFsc2VcclxuXHRcdEBhY2NlbGVyYXRpb24gPSAwLjBcclxuXHRcdFxyXG5cdFx0QHZlbG9jaXR5ID0gKE1hdGgucmFuZG9tKCkgKiAyIC0gMS4wKSAqIDEwMFxyXG5cdFx0QHZlbG9jaXR5ICs9IEB2ZWxvY2l0eSA8IDAgPyAtNTAgOiA1MFxyXG5cclxuXHRcdEBhbmdsZSA9IDAgIyhNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDAuNVxyXG5cclxuXHJcblx0IyBEcmF3IHRoZSBzaW11bGF0aW9uIHRvIGEgY29udGV4dCAyRCBmb3IgdmlzdWFsaXphdGlvbi5cclxuXHQjIFxyXG5cdCMgQHBhcmFtIFtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkRdIGNvbnRleHQgXHJcblx0ZHJhdzogKGNvbnRleHQpIC0+XHJcblx0XHRAYmFycmllckxlZnQuZHJhdyhjb250ZXh0KVxyXG5cdFx0QGJhcnJpZXJSaWdodC5kcmF3KGNvbnRleHQpXHJcblxyXG5cdFx0Y29udGV4dC50cmFuc2xhdGUoQHBvc2l0aW9uLCAwKVxyXG5cclxuXHRcdCMgR3VpZGVsaW5lc1xyXG5cdFx0Y29udGV4dC5zdHJva2VTdHlsZSA9ICcjRkYwMDAwJ1xyXG5cdFx0Y29udGV4dC5saW5lV2lkdGggPSAxXHJcblx0XHRjb250ZXh0LmJlZ2luUGF0aCgpXHJcblx0XHRjb250ZXh0Lm1vdmVUbyhNYXRoLnNpbigtQGxpbWl0QW5nbGUpICogMTAwLCBNYXRoLmNvcygtQGxpbWl0QW5nbGUpICogMTAwKVxyXG5cdFx0Y29udGV4dC5saW5lVG8oMCwgMClcclxuXHRcdGNvbnRleHQubGluZVRvKE1hdGguc2luKEBsaW1pdEFuZ2xlKSAqIDEwMCwgTWF0aC5jb3MoQGxpbWl0QW5nbGUpICogIDEwMClcclxuXHRcdGNvbnRleHQuc3Ryb2tlKClcclxuXHJcblx0XHRjb250ZXh0LnN0cm9rZVN0eWxlID0gJyMwMDAwMDAnXHJcblx0XHRjb250ZXh0LmxpbmVXaWR0aCA9IDNcclxuXHRcdEBwZW5kdWx1bS5lbmQueCA9IE1hdGguc2luKEBhbmdsZSkgKiAxMDBcclxuXHRcdEBwZW5kdWx1bS5lbmQueSA9IE1hdGguY29zKEBhbmdsZSkgKiAxMDBcclxuXHRcdEBwZW5kdWx1bS5kcmF3KGNvbnRleHQpXHJcblx0XHRAY2FydC5kcmF3KGNvbnRleHQpXHJcblxyXG5cclxuXHQjIFVwZGF0ZSB0aGUgbG9naWMgb2YgdGhlIHNpbXVsYXRpb24uXHJcblx0IyBcclxuXHQjIFRoZSBjYXJ0IG1vdmVzIGFjY29yZGluZyB0byBpdHMgdmVsb2NpdHksIHRoZSBzdGljayBpcyB1c2VkIGJhc2VkIG9uIHZlbG9jaXR5IGFuZCBpdHMgY3VycmVudCBhbmdsZSAoZ3Jhdml0eSkuXHJcblx0I1xyXG5cdCMgQHBhcmFtIFtudW1iZXJdIGRlbHRhIFRpbWUgZWxhcHNlZCBzaW5jZSBsYXN0IGZyYW1lIGluIHNlY29uZHMuXHJcblx0dXBkYXRlOiAoZGVsdGEpIC0+XHJcblx0XHQjIElmIGdhbWUgb3ZlciByZXR1cm5cclxuXHRcdGlmIEBnYW1lT3ZlclxyXG5cdFx0XHRyZXR1cm5cclxuXHJcblx0XHQjIFByb2Nlc3Mga2V5IHByZXNzZXNcclxuXHRcdGlmIEBsZWZ0UHJlc3NlZFxyXG5cdFx0XHRAYWNjZWxlcmF0aW9uID0gLUBtb3ZlQWNjZWxlcmF0aW9uXHJcblx0XHRlbHNlIGlmIEByaWdodFByZXNzZWRcclxuXHRcdFx0QGFjY2VsZXJhdGlvbiA9IEBtb3ZlQWNjZWxlcmF0aW9uXHJcblx0XHRlbHNlXHJcblx0XHRcdEBhY2NlbGVyYXRpb24gPSAwLjBcclxuXHJcblx0XHQjIFVwZGF0ZSBwaHlzaWNzXHJcblx0XHRAdmVsb2NpdHkgKz0gQGFjY2VsZXJhdGlvbiAqIGRlbHRhXHJcblx0XHRAdmVsb2NpdHkgKj0gMSAtIChAZnJpY3Rpb24gKiBkZWx0YSlcclxuXHRcdEBwb3NpdGlvbiArPSBAdmVsb2NpdHkgKiBkZWx0YVxyXG5cclxuXHRcdEBhbmdsZSArPSBAYW5nbGUgKiBAcGVuZHVsdW1HcmF2aXR5ICogZGVsdGFcclxuXHRcdEBhbmdsZSAtPSBAdmVsb2NpdHkgKiBAcGVuZHVsdW1Nb21lbnR1bSAqIGRlbHRhXHJcblxyXG5cdFx0QHNjb3JlICs9IGRlbHRhXHJcblxyXG5cdFx0Y29uc29sZS5sb2coZGVsdGEsIEB2ZWxvY2l0eSwgQGFuZ2xlLCBAc2NvcmUsIEBwb3NpdGlvbilcclxuXHJcblx0XHQjIElmIHRoZSBhbmdsZSBvZiB0aGUgcGVuZHVsdW0gZHJvcCBiZWxsb3cgdGhlIG1pbml1bSBlbmQgdGhlIGdhbWVcclxuXHRcdGlmIEBhbmdsZSA+IEBsaW1pdEFuZ2xlIG9yIEBhbmdsZSA8IC1AbGltaXRBbmdsZVxyXG5cdFx0XHRAZ2FtZU92ZXIgPSB0cnVlXHJcblxyXG5cdFx0IyBJZiB0aGUgY2FydCBoaXRzIHRoZSBiYXJyaWVkIGVuZCB0aGUgZ2FtZVxyXG5cdFx0aWYgQHBvc2l0aW9uICsgQGJveEhhbGZTaXplID4gQGJhcnJpZXJEaXN0YW5jZSBvciBAcG9zaXRpb24gLSBAYm94SGFsZlNpemUgPCAtQGJhcnJpZXJEaXN0YW5jZVxyXG5cdFx0XHRAZ2FtZU92ZXIgPSB0cnVlXHJcblxyXG5leHBvcnQge0NhcnRTaW11bGF0aW9ufSIsIlxyXG4jIExpbmVhciByZWdyZXNzaW9uIGlzIHJlcHJlc2VudGVkIGJ5IHR3byBwYXJhbWV0ZXJzOiB0aGUgb3JpZ2luIGFuZCBzbG9wZSBvZiB0aGUgbGluZS5cclxuY2xhc3MgTGluZWFyUmVncmVzc2lvblxyXG5cdCMgQHBhcmFtIFtudW1iZXJdIG9yaSBPcmlnaW4gb2YgdGhlIGxpbmUuXHJcblx0IyBAcGFyYW0gW251bWJlcl0gZGVjbCBTbG9wZSBvZiB0aGUgbGluZS5cclxuXHRjb25zdHJ1Y3RvcjogKG9yaSwgZGVjbCkgLT5cclxuXHRcdEBvcmkgPSBvcmlcclxuXHRcdEBkZWNsID0gZGVjbFxyXG5cclxuXHJcblx0IyBKaXR0ZXIgdGhlIHZhbHVlcyBpbiB0aGUgcmVncmVzc2lvbiByYW5kb21seS5cclxuXHQjIFxyXG5cdCMgVXNlZnVsbCBmb3IgdHJhaW5pbmcgcHVycG9zZXMuXHJcblx0IyBcclxuXHQjIEBwYXJhbSBbbnVtYmVyXSBzY2FsZSBTY2FsZSBvZiB0aGUgaml0dGVyaW5nLiBcclxuXHRqaXR0ZXI6IChzY2FsZSkgLT5cclxuXHRcdEBvcmkgKz0gKE1hdGgucmFuZG9tKCkgLSAwLjUpICogc2NhbGVcclxuXHRcdEBkZWNsICs9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIHNjYWxlXHJcblxyXG5cclxuXHQjIENyZWF0ZSBhIGNvcHkgb2YgdGhlIGxpbmVhciByZWdyZXNzaW9uIG9iamVjdC5cclxuXHQjIFxyXG5cdCMgQHJldHVybnMgW0xpbmVhclJlZ3Jlc3Npb25dIENsb25lIG9mIHRoZSBsaW5lYXIgcmVncmVzc2lvbiBvYmplY3QuXHJcblx0Y2xvbmU6ICgpIC0+XHJcblx0XHRyZXR1cm4gbmV3IExpbmVhclJlZ3Jlc3Npb24oQG9yaSwgQGRlY2wpXHJcblxyXG5leHBvcnQge0xpbmVhclJlZ3Jlc3Npb259IiwiaW1wb3J0IHtMaW5lYXJSZWdyZXNzaW9ufSBmcm9tICcuL0xpbmVhclJlZ3Jlc3Npb24nXHJcblxyXG4jIE1vZGVsIHRvIGNvbnRyb2wgdGhlIGNhcnQsIGl0cyBwYXJhbWV0ZXJzIGNhbiBiZSBzZXQgYW5kIHVzZWQgdG8gY29udHJvbCB0aGUgY2FydC5cclxuIyBcclxuIyBUaGUgbW9kZWwgaXMgY29tcG9zZWQgb2YgMyBsaW5lYXIgcmVncmVzc2lvbnMgZm9yIHdpY2ggdGhlaXIgcGFyYW1ldGVycyBjYW4gYmUgdHJhaW5lZCBhbmQgdXNlZCB0byBjb250cm9sIHRoZSBjYXJ0IG9iamVjdC5cclxuY2xhc3MgTGluZWFyTW9kZWxcclxuXHRjb25zdHJ1Y3RvcjogKCkgLT5cclxuXHRcdEB2ZWwgPSBuZXcgTGluZWFyUmVncmVzc2lvbigwLCAwLjApXHJcblx0XHRAYW5nbGUgPSBuZXcgTGluZWFyUmVncmVzc2lvbigwLCAwLjApXHJcblx0XHRAcG9zID0gbmV3IExpbmVhclJlZ3Jlc3Npb24oMCwgMC4wKVxyXG5cdFx0QGUgPSAwLjBcclxuXHJcblx0IyBKaXR0ZXIgYWxsIHZhbHVlcyBvZiB0aGUgbW9kZWxcclxuXHQjXHJcblx0IyBDYW4gYmUgdXNlZCBkdXJpbmcgdHJhaW5pbmcgdG8gcHJvZHVjZSB2YXJpYXRpb25zIG9mIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBtb2RlbC5cclxuXHQjXHJcblx0IyBAcGFyYW0gW251bWJlcl0gc2NhbGUgU2NhbGUgb2YgdGhlIGppdHRlcmluZyB0aGUgdmFsdWVzIHdpbGwgdmFyaWF0ZSBoYWxmIG9mIHRoZSBzY2FsZSB1cCBhbmQgZG93bi5cclxuXHRqaXR0ZXI6IChzY2FsZSkgLT5cclxuXHRcdEB2ZWwuaml0dGVyKHNjYWxlKVxyXG5cdFx0QGFuZ2xlLmppdHRlcihzY2FsZSlcclxuXHRcdEBwb3Muaml0dGVyKHNjYWxlKVxyXG5cclxuXHRcdEBlICs9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIHNjYWxlXHJcblxyXG5cdCMgQ3JlYXRlIGEgbmV3IG9iamVjdCB3aXRoIGEgY29weSBvZiB0aGUgdmFsdWVzIHN0b3JlZCBpbiB0aGlzIG9uZS5cclxuXHRjbG9uZTogKCkgLT5cclxuXHRcdG0gPSBuZXcgTGluZWFyTW9kZWwoKVxyXG5cdFx0XHJcblx0XHRtLnZlbCA9IEBwb3MuY2xvbmUoKVxyXG5cdFx0bS5hbmdsZSA9IEBwb3MuY2xvbmUoKVxyXG5cdFx0bS5wb3MgPSBAcG9zLmNsb25lKClcclxuXHRcdG0uZSA9IEBlXHJcblxyXG5cdFx0cmV0dXJuIG1cclxuXHJcblx0IyBDb250cm9sIHRoZSBzaW11bGF0aW9uIHVzaW5nIHRoZSBwYXJhbWV0ZXJzIHN0b3JlZCBpbiB0aGlzIG1vZGVsLlxyXG5cdGNvbnRyb2w6IChjYXJ0KSAtPlxyXG5cdFx0diA9IEB2ZWwuZGVjbCAqIGNhcnQudmVsb2NpdHkgKyBAdmVsLm9yaVxyXG5cdFx0YSA9IEBhbmdsZS5kZWNsICogY2FydC5hbmdsZSArIEBhbmdsZS5vcmlcclxuXHRcdHAgPSBAcG9zLmRlY2wgKiBjYXJ0LnBvc2l0aW9uICsgQHBvcy5vcmlcclxuXHJcblx0XHR2YWx1ZSA9IGEgKyB2ICsgcFxyXG5cclxuXHRcdGNhcnQubGVmdFByZXNzZWQgPSB2YWx1ZSA8IEBlXHJcblx0XHRjYXJ0LnJpZ2h0UHJlc3NlZCA9IHZhbHVlID4gQGVcclxuXHJcbmV4cG9ydCB7TGluZWFyTW9kZWx9IiwiaW1wb3J0IHtDYXJ0U2ltdWxhdGlvbn0gZnJvbSAnLi9DYXJ0U2ltdWxhdGlvbidcclxuXHJcbiMgTWV0aG9kcyB0byBydW4gdGhlIHNpbXVsYXRpb24gaW4gaGVhZGxlc3MgbW9kZSAodGVybWluYWwgb25seSksIG9yIGF0dGFjaGVkIHRvIGEgY2FudmFzIChHcmFwaGljYWwpLlxyXG5jbGFzcyBSdW5uZXJcclxuXHQjIFJ1biB0aGUgc2ltdWxhdGlvbiBoZWFkbGVzc2x5IChpbiB0ZXJtaW5hbCkuXHJcblx0IyBcclxuXHQjIFRoZSBzaW11bGF0aW9uIGlzIHJ1biB1bnRpbCB0aGUgc3RpY2sgaXMgZHJvcHBlZCBvZmYuXHJcblx0IyBcclxuXHQjIEBwYXJhbSBbRnVuY3Rpb25dIGxvZ2ljQ2FsbGJhY2sgQ2FsbGJhY2sgbWV0aG9kIHRvIHByb2Nlc3MgdGhlIGNhcnQgbG9naWMuXHJcblx0IyBAcGFyYW0gW251bWJlcl0gc2NvcmVMaW1pdCBIb3cgbXVjaCB0aW1lIHRvIHNpbXVsYXRlIGluIHRoZSBsaW1pdCAocHJldmVudCBpbmZpbml0ZSBydW4pLlxyXG5cdCMgQHBhcmFtIFtib29sZWFuXSBsb2dQZXJmb3JtYW5jZSBJZiB0cnVlIGNvbnNvbGUgbG9ncyB3aXRoIHBlcmZvcm1hbmNlIG9mIHRoZSBzaW11bGF0aW9uIGFyZSBwcmludGVkIG91dC5cclxuXHQjIEByZXR1cm5zIFtudW1iZXJdIFJldHVybnMgdGhlIGFtbW91bnQgb2YgcG9pbnRzIGFjY3VtdWxhdGVkIGR1cmluZyB0aGUgc2ltdWxhdGlvbi5cclxuXHRAcnVuSGVhZGxlc3M6IChsb2dpY0NhbGxiYWNrLCBzY29yZUxpbWl0LCBsb2dQZXJmb3JtYW5jZSkgLT5cclxuXHRcdHNjb3JlTGltaXQgPSBpZiBzY29yZUxpbWl0ICE9IHVuZGVmaW5lZCB0aGVuIHNjb3JlTGltaXQgZWxzZSBJbmZpbml0eVxyXG5cclxuXHRcdGNhcnQgPSBuZXcgQ2FydFNpbXVsYXRpb24oKVxyXG5cdFx0ZnJlcXVlbmN5ID0gMSAvIDYwXHJcblxyXG5cdFx0aWYgbG9nUGVyZm9ybWFuY2VcclxuXHRcdFx0dGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXHJcblxyXG5cdFx0d2hpbGUgIWNhcnQuZ2FtZU92ZXIgYW5kIGNhcnQuc2NvcmUgPCBzY29yZUxpbWl0XHJcblx0XHRcdGlmIGxvZ2ljQ2FsbGJhY2sgIT0gdW5kZWZpbmVkXHJcblx0XHRcdFx0bG9naWNDYWxsYmFjayhjYXJ0KVxyXG5cdFx0XHRcclxuXHRcdFx0Y2FydC51cGRhdGUoZnJlcXVlbmN5KVxyXG5cdFx0XHJcblx0XHRpZiBsb2dQZXJmb3JtYW5jZVxyXG5cdFx0XHRlbmQgPSBwZXJmb3JtYW5jZS5ub3coKVxyXG5cdFx0XHRjb25zb2xlLmxvZygnIC0gU2ltdWxhdGlvbiBlbmRlZCB3aXRoICcgKyBjYXJ0LnNjb3JlICsgJyBwb2ludHMsIHRvb2sgJyArIChlbmQgLSB0aW1lKSArICcuJylcclxuXHJcblx0XHRyZXR1cm4gY2FydC5zY29yZVxyXG5cclxuXHQjIFJ1biB0aGUgc2ltdWxhdGlvbiB3aXRoIHZpc3VhbGl6YXRpb24sIChhdHRhY2hlZCB0byBhIGNhbnZhcykuXHJcblx0IyBcclxuXHQjIFJ1bnMgYXQgcmVhbCB0aW1lIHNwZWVkIGZvciB2aXN1YWxpemF0aW9uIHB1cnBvc2VzLlxyXG5cdCMgXHJcblx0IyBAcGFyYW0gW0VsZW1lbnRdIGNhbnZhcyBDYW52YXMgZWxlbWVudCB3aGVyZSB0aGUgaW50ZXJmYWNlIGlzIGRyYXduLlxyXG5cdCMgQHBhcmFtIFtGdW5jdGlvbl0gb25JdGVyYXRpb24gTWV0aG9kIGNhbGxlZCBldmVyeSBpdGVyYXRpb24gb2YgdGhlIHNpbXVsYXRpb24gdG8gY29udHJvbCB0aGUgY2FydC5cclxuXHQjIEBwYXJhbSBbRnVuY3Rpb25dIG9uR2FtZU92ZXIgTWV0aG9kIGNhbGxlZCB3aGVuIHRoZSBzaW11bGF0aW9uIGVuZHMuXHJcblx0QHJ1bkdyYXBoaWNhbDogKGNhbnZhcywgb25JdGVyYXRpb24sIG9uR2FtZU92ZXIpIC0+XHJcblx0XHRjYXJ0ID0gbmV3IENhcnRTaW11bGF0aW9uKClcclxuXHRcdGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKVxyXG5cdFx0bWF4U2NvcmUgPSAwXHJcblxyXG5cdFx0IyBUaW1lIG9mIHRoZSBsYXN0IGZyYW1lIGluIG1zXHJcblx0XHRsYXN0ID0gMDtcclxuXHJcblx0XHR1cGRhdGUgPSAodGltZSkgLT5cclxuXHRcdFx0aWYgdGltZVxyXG5cdFx0XHRcdGRlbHRhID0gKHRpbWUgLSBsYXN0KSAvIDEwMDAuMFxyXG5cdFx0XHRcdGxhc3QgPSB0aW1lXHJcblx0XHRcdGVsc2VcclxuXHRcdFx0XHRkZWx0YSA9IDBcclxuXHJcblx0XHRcdGlmIG9uSXRlcmF0aW9uICE9IHVuZGVmaW5lZFxyXG5cdFx0XHRcdG9uSXRlcmF0aW9uKGNhcnQpXHJcblxyXG5cdFx0XHRjYXJ0LnVwZGF0ZShkZWx0YSlcclxuXHJcblx0XHRcdGlmIGNhcnQuZ2FtZU92ZXJcclxuXHRcdFx0XHRpZiBvbkdhbWVPdmVyICE9IHVuZGVmaW5lZFxyXG5cdFx0XHRcdFx0b25HYW1lT3ZlcihjYXJ0LCBtYXhTY29yZSlcclxuXHJcblx0XHRcdFx0aWYgY2FydC5zY29yZSA+IG1heFNjb3JlIFxyXG5cdFx0XHRcdFx0bWF4U2NvcmUgPSBjYXJ0LnNjb3JlXHJcblxyXG5cdFx0XHRcdGNhcnQucmVzZXQoKVxyXG5cdFx0XHRcclxuXHRcdFx0IyBSZW5kZXJcclxuXHRcdFx0Y29udGV4dC5zYXZlKClcclxuXHRcdFx0Y29udGV4dC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KVxyXG5cdFx0XHRcclxuXHRcdFx0IyBUZXh0IGluIHRoZSBjYW52YXNcclxuXHRcdFx0Y29udGV4dC5mb250ID0gJzE1cHggQXJpYWwnXHJcblx0XHRcdGNvbnRleHQudGV4dEFsaWduID0gJ2xlZnQnXHJcblx0XHRcdGNvbnRleHQuZmlsbFRleHQoJ1BvaW50czogJyArIGNhcnQuc2NvcmUsIDEwLCAyMClcclxuXHRcdFx0Y29udGV4dC5maWxsVGV4dCgnTWF4OiAnICsgbWF4U2NvcmUsIDEwLCA0MClcclxuXHJcblx0XHRcdCMgVHJhbnNmb3JtXHJcblx0XHRcdGNvbnRleHQudHJhbnNmb3JtKDEsIDAsIDAsIC0xLCAwLCBjYW52YXMuaGVpZ2h0KVxyXG5cdFx0XHRjb250ZXh0LnRyYW5zbGF0ZShjYW52YXMud2lkdGggLyAyLCBjYW52YXMuaGVpZ2h0IC8gMilcclxuXHRcdFx0Y2FydC5kcmF3KGNvbnRleHQpXHJcblxyXG5cdFx0XHRjb250ZXh0LnJlc3RvcmUoKVxyXG5cdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUodXBkYXRlKVxyXG5cclxuXHRcdHVwZGF0ZSgpXHJcblxyXG5leHBvcnQge1J1bm5lcn1cclxuIiwiaW1wb3J0IHtSdW5uZXJ9IGZyb20gJy4vUnVubmVyJ1xyXG5pbXBvcnQge0xpbmVhck1vZGVsfSBmcm9tICcuL0xpbmVhck1vZGVsJ1xyXG5cclxuIyBNZXRob2RzIGZvciB0cmFpbmluZyBvZiB0aGUgY2FydCBtb2RlbC5cclxuI1xyXG4jIFRyYWluaW5nIHByb2R1Y2VzIGEgbGluZWFyIG1vZGVsIG9mIHRoZSBjYXJ0LCB0aGF0IGNhbiBiZSB1c2VkIHRvIGNvbnRyb2wgdGhlIHNpbXVsYXRpb24uXHJcbmNsYXNzIExpbmVhck1vZGVsVHJhaW5cclxuXHQjIFRyYWluIHRoZSBtb2RlbCBvZiB0aGUgY2FydCBpdGVyYXRpdmVsbHkuXHJcblx0IyBcclxuXHQjIFVzZXMgYSBzZWFzb25hbCB0cmFpbmluZyBhcHByb2FjaCBmb3Igd2ljaCBtYW55IGVwb2NocyBhcmUgZXhlY3V0ZWQgYW5kIHRoZSBiZXN0IGZyb20gZWFjaCBlcG9jaCBpcyBzZWxlY3RlZCBhcyBiYXNlZCBmb3IgdGhlIG5leHQuXHJcblx0IyBcclxuXHQjIEBwYXJhbSBbbnVtYmVyXSBlcG9jaHMgTnVtYmVyIG9mIGl0ZXJhdGlvbnMvZXBvY2hzIHRvIHNpbXVsYXRlLlxyXG5cdCMgQHBhcmFtIFtudW1iZXJdIGl0ZXJhdGlvbnMgTnVtYmVyIG9mIHZhcmlhdGlvbnMgdGVzdGVkIGluIGVhY2ggZXBvY2guXHJcblx0IyBAcGFyYW0gW251bWJlcl0gcnVucyBIb3cgbWFueSB0aW1lcyB0byBydW4gZWFjaCB2YXJpYXRpb24gdG8gZ2V0IGFuIGF2ZXJhZ2UgcGVyZm9ybWFuY2UuXHJcblx0IyBAcmV0dXJucyB7TGluZWFyTW9kZWx9IFRyYWluZWQgbW9kZWwgdGhhdCBjYW4gYmUgdXNlZCB0byBjb250cm9sIHRoZSBzaW11bGF0aW9uLlxyXG5cdEB0cmFpbkl0ZXJhdGl2ZTogKGVwb2NocywgaXRlcmF0aW9ucywgcnVucywgc2NvcmVMaW1pdCkgLT5cclxuXHRcdGVwb2NocyA9IGlmIGVwb2NocyAhPSB1bmRlZmluZWQgdGhlbiBlcG9jaHMgZWxzZSA1MDBcclxuXHRcdGl0ZXJhdGlvbnMgPSBpZiBpdGVyYXRpb25zICE9IHVuZGVmaW5lZCB0aGVuIGl0ZXJhdGlvbnMgZWxzZSAxMDBcclxuXHRcdHJ1bnMgPSBpZiBydW5zICE9IHVuZGVmaW5lZCB0aGVuIHJ1bnMgZWxzZSA1XHJcblxyXG5cdFx0IyBJZiB0aGUgbW9kZWwgcmVhY2hlcyB0aGlzIGxldmVsIG9mIHBlcmZvcm1hbmNlIHRoZSB0cmFpbmluZyBpcyBzdG9wcGVkLlxyXG5cdFx0c2NvcmVMaW1pdCA9IGlmIHNjb3JlTGltaXQgIT0gdW5kZWZpbmVkIHRoZW4gc2NvcmVMaW1pdCBlbHNlIDIwMDAuMFxyXG5cclxuXHRcdGNvbnNvbGUubG9nKCcgLSBUcmFpbmluZyBwcm9jZXNzIHN0YXJ0aW5nLiAnLCB7ZXBvY2hzLCBpdGVyYXRpb25zLCBydW5zfSlcclxuXHJcblx0XHRiZXN0TW9kZWwgPSBuZXcgTGluZWFyTW9kZWwoKVxyXG5cdFx0YmVzdFNjb3JlID0gTGluZWFyTW9kZWxUcmFpbi50ZXN0TW9kZWwoYmVzdE1vZGVsLCBydW5zLCBzY29yZUxpbWl0KVxyXG5cclxuXHRcdGppdHRlciA9IDEuMFxyXG5cdFx0XHJcblx0XHQjIEVwb2NoXHJcblx0XHRlID0gMFxyXG5cdFx0d2hpbGUgZSA8IGVwb2Noc1xyXG5cdFx0XHRjb25zb2xlLmxvZygnIC0gUnVubmluZyBlcG9jaCAnLCBlLCAnIHNjb3JlICcsIGJlc3RTY29yZSlcclxuXHJcblx0XHRcdGVwb2NoTW9kZWwgPSBudWxsXHJcblx0XHRcdGVwb2NoU2NvcmUgPSAwXHJcblxyXG5cdFx0XHQjIE51bWJlciBvZiBpdGVyYXRpb25zIHBlciBlcG9jaFxyXG5cdFx0XHRpID0gMFxyXG5cdFx0XHR3aGlsZSBpIDwgaXRlcmF0aW9uc1xyXG5cdFx0XHRcdG1vZGVsID0gYmVzdE1vZGVsLmNsb25lKClcclxuXHRcdFx0XHRtb2RlbC5qaXR0ZXIoaml0dGVyKVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHBvaW50cyA9IExpbmVhck1vZGVsVHJhaW4udGVzdE1vZGVsKG1vZGVsLCBydW5zLCBzY29yZUxpbWl0KVxyXG5cdFx0XHRcdGlmIHBvaW50cyA+IGVwb2NoU2NvcmVcclxuXHRcdFx0XHRcdGVwb2NoTW9kZWwgPSBtb2RlbFxyXG5cdFx0XHRcdFx0ZXBvY2hTY29yZSA9IHBvaW50c1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGkrK1xyXG5cclxuXHRcdFx0aWYgZXBvY2hTY29yZSA+PSBiZXN0U2NvcmVcclxuXHRcdFx0XHRiZXN0TW9kZWwgPSBlcG9jaE1vZGVsXHJcblx0XHRcdFx0YmVzdFNjb3JlID0gZXBvY2hTY29yZVxyXG5cclxuXHRcdFx0aWYgYmVzdFNjb3JlID49IHNjb3JlTGltaXRcclxuXHRcdFx0XHRicmVha1xyXG5cdFx0XHRlKytcclxuXHJcblx0XHRjb25zb2xlLmxvZygnIC0gVHJhaW5pbmcgZmluaXNoZWQgd2l0aCBzY29yZSAnLCBiZXN0U2NvcmUsICcgbW9kZWwgJywgYmVzdE1vZGVsKVxyXG5cdFx0cmV0dXJuIGJlc3RNb2RlbFxyXG5cclxuXHQjIEZ1bGx5IHJhbmRvbWl6ZWQgdHJhaW5pbmcsIHRlc3QgbWFueSBwYXJhbWV0ZXJzIGFuZCBzZWxlY3QgdGhlIGJlc3QgZnJvbSBhbGwuXHJcblx0IyBcclxuXHQjIEBwYXJhbSBbbnVtYmVyXSBpdGVyYXRpb25zIE51bWJlciBvZiB2YXJpYXRpb25zIHRlc3RlZCBpbiBlYWNoIGVwb2NoLlxyXG5cdCMgQHBhcmFtIFtudW1iZXJdIHJ1bnMgSG93IG1hbnkgdGltZXMgdG8gcnVuIGVhY2ggdmFyaWF0aW9uIHRvIGdldCBhbiBhdmVyYWdlIHBlcmZvcm1hbmNlLlxyXG5cdCMgQHJldHVybnMge0xpbmVhck1vZGVsfSBUcmFpbmVkIG1vZGVsIHRoYXQgY2FuIGJlIHVzZWQgdG8gY29udHJvbCB0aGUgc2ltdWxhdGlvbi5cclxuXHRAdHJhaW5SYW5kb206IChpdGVyYXRpb25zLCBydW5zLCBzY29yZUxpbWl0KSAtPlxyXG5cdFx0aXRlcmF0aW9ucyA9IGlmIGl0ZXJhdGlvbnMgIT0gdW5kZWZpbmVkIHRoZW4gaXRlcmF0aW9ucyBlbHNlIDFlNVxyXG5cdFx0cnVucyA9IGlmIHJ1bnMgIT0gdW5kZWZpbmVkIHRoZW4gcnVucyBlbHNlIDVcclxuXHJcblx0XHQjIElmIHRoZSBtb2RlbCByZWFjaGVzIHRoaXMgbGV2ZWwgb2YgcGVyZm9ybWFuY2UgdGhlIHRyYWluaW5nIGlzIHN0b3BwZWQuXHJcblx0XHRzY29yZUxpbWl0ID0gaWYgc2NvcmVMaW1pdCAhPSB1bmRlZmluZWQgdGhlbiBzY29yZUxpbWl0IGVsc2UgMjAwMC4wXHJcblxyXG5cdFx0Y29uc29sZS5sb2coJyAtIFRyYWluaW5nIHByb2Nlc3Mgc3RhcnRpbmcuICcsIHtpdGVyYXRpb25zLCBydW5zfSlcclxuXHJcblx0XHRiZXN0TW9kZWwgPSBudWxsXHJcblx0XHRiZXN0U2NvcmUgPSAwXHJcblx0XHRcclxuXHRcdGppdHRlciA9IDIuMFxyXG5cclxuXHRcdCMgVGVzdHMgcGVyIGVwb2NoXHJcblx0XHRpID0gMFxyXG5cdFx0d2hpbGUgaSA8IGl0ZXJhdGlvbnNcclxuXHRcdFx0bW9kZWwgPSBuZXcgTGluZWFyTW9kZWwoKVxyXG5cdFx0XHRtb2RlbC5qaXR0ZXIoaml0dGVyKVxyXG5cdFx0XHRcclxuXHRcdFx0c2NvcmUgPSBMaW5lYXJNb2RlbFRyYWluLnRlc3RNb2RlbChtb2RlbCwgcnVucywgc2NvcmVMaW1pdClcclxuXHRcdFx0aWYgc2NvcmUgPiBiZXN0U2NvcmVcclxuXHRcdFx0XHRiZXN0TW9kZWwgPSBtb2RlbFxyXG5cdFx0XHRcdGJlc3RTY29yZSA9IHNjb3JlXHJcblxyXG5cdFx0XHRjb25zb2xlLmxvZygnIC0gSXRlcmF0aW9uICcsIGksICcgc2NvcmUgJywgYmVzdFNjb3JlKVxyXG5cclxuXHRcdFx0aWYgYmVzdFNjb3JlID49IHNjb3JlTGltaXRcclxuXHRcdFx0XHRicmVha1xyXG5cdFx0XHRcclxuXHRcdFx0aSsrXHJcblxyXG5cdFx0Y29uc29sZS5sb2coJyAtIFRyYWluaW5nIGZpbmlzaGVkIHdpdGggc2NvcmUgJywgYmVzdFNjb3JlLCAnIG1vZGVsICcsIGJlc3RNb2RlbClcclxuXHJcblx0XHRyZXR1cm4gYmVzdE1vZGVsXHJcblxyXG5cdCMgUnVuIHRoZSBtb2RlbCwgbXVsdGlwbGUgdGltZXMgYW5kIGF2ZXJhZ2UgdGhlIHBvbnR1YXRpb24gb2YgdGhlIHJ1bnMuXHJcblx0IyBcclxuXHQjIEBwYXJhbSBbTGluZWFyTW9kZWxdIG1vZGVsIE1vZGVsIHRvIGJlIHRlc3RlZC5cclxuXHQjIEBwYXJhbSBbbnVtYmVyXSBydW5zIE51bWJlciBvZiBpdGVyYXRpb25zIHRvIHRlc3QgdGhlIG1vZGVsLlxyXG5cdCMgQHBhcmFtIFtudW1iZXJdIHNjb3JlTGltaXQgSWYgdGhlIHNjb3JlIG9mIHRoZSBtb2RlbCBnZXRzIGJldHRlciB0aGFuIHRoZSBsaW1pdCB0aGUgc2ltdWxhdGlvbiBzdG9wcy5cclxuXHQjIEByZXR1cm4ge251bWJlcn0gVGhlIGF2ZXJhZ2UgcGVyZm9ybWFuY2Ugc2NvcmUgb2YgdGhlIG1vZGVsLlxyXG5cdEB0ZXN0TW9kZWw6IChtb2RlbCwgcnVucywgc2NvcmVMaW1pdCkgLT5cclxuXHRcdHNjb3JlID0gMFxyXG5cdFx0ciA9IDBcclxuXHRcdHdoaWxlIHIgPCBydW5zXHJcblx0XHRcdGNvbnRyb2wgPSAoY2FydCkgLT5cclxuXHRcdFx0XHRtb2RlbC5jb250cm9sKGNhcnQpXHJcblx0XHRcdFx0cmV0dXJuXHJcblx0XHRcdFx0XHJcblx0XHRcdHNjb3JlICs9IFJ1bm5lci5ydW5IZWFkbGVzcyhjb250cm9sLCBzY29yZUxpbWl0KVxyXG5cdFx0XHRyKytcclxuXHRcdFxyXG5cdFx0cmV0dXJuIHNjb3JlIC8gcnVuc1xyXG5cclxuZXhwb3J0IHtMaW5lYXJNb2RlbFRyYWlufVxyXG4iLCIjIEF1eGlsaWFyIG1ldGhvZHMgZm9yIGZpbGUgbWFuaXB1bGF0aW9uLCBuZXR3b3JraW5nLCBldGNcclxuY2xhc3MgVXRpbHNcclxuXHQjIFdyaXRlIGRhdGEgaW50byBhIGZpbGUuIFVzZWZ1bCB0byBleHBvcnQgSlNPTiBkYXRhLlxyXG5cdCMgXHJcblx0IyBAcGFyYW0gW3N0cmluZyB8IG9iamVjdF0gZGF0YSBEYXRhIHRvIGJlIHdyaXR0ZW4gdG8gZmlsZS4gXHJcblx0IyBAcGFyYW0gW3N0cmluZ10gZm5hbWUgTmFtZSBvZiB0aGUgZmlsZSB0byBiZSB3cml0dGVuLlxyXG5cdEB3cml0ZUZpbGU6IChkYXRhLCBmbmFtZSkgLT5cclxuXHRcdGlmIHR5cGVvZiBkYXRhID09ICdvYmplY3QnXHJcblx0XHRcdGRhdGEgPSBKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCAnXFx0JylcclxuXHJcblx0XHRibG9iID0gbmV3IEJsb2IoW2RhdGFdLCB7dHlwZTogJ29jdGV0L3N0cmVhbSd9KVxyXG5cdFx0XHJcblx0XHRkb3dubG9hZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKVxyXG5cdFx0ZG93bmxvYWQuZG93bmxvYWQgPSBmbmFtZVxyXG5cdFx0ZG93bmxvYWQuaHJlZiA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpXHJcblx0XHRkb3dubG9hZC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXHJcblxyXG5cdFx0ZG93bmxvYWQub25jbGljayA9ICgpIC0+XHJcblx0XHRcdGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGhpcylcclxuXHRcdFx0cmV0dXJuXHJcblx0XHRcclxuXHRcdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZG93bmxvYWQpXHJcblx0XHRcclxuXHRcdGRvd25sb2FkLmNsaWNrKClcclxuXHRcdHJldHVyblxyXG5cclxuXHJcblx0IyBDaG9vc2UgZmlsZSBhbmQgcmVhZCBkYXRhIGZyb20gaXQuXHJcblx0QHJlYWRGaWxlOiAob25Mb2FkKSAtPlxyXG5cdFx0Y2hvb3NlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JylcclxuXHRcdGNob29zZXIudHlwZSA9ICdmaWxlJ1xyXG5cdFx0Y2hvb3Nlci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXHJcblx0XHRkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNob29zZXIpXHJcblxyXG5cdFx0Y2hvb3Nlci5vbmNoYW5nZSA9ICgpIC0+XHJcblx0XHRcdGZpbGVzID0gY2hvb3Nlci5maWxlc1xyXG5cdFx0XHRpZiBmaWxlcy5sZW5ndGggPT0gMFxyXG5cdFx0XHRcdHJldHVyblxyXG5cclxuXHRcdFx0cmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKVxyXG5cdFx0XHRyZWFkZXIub25sb2FkID0gKCkgLT5cclxuXHRcdFx0XHR0ZXh0ID0gcmVhZGVyLnJlc3VsdFxyXG5cdFx0XHRcdG9uTG9hZCh0ZXh0KVxyXG5cdFx0XHRcclxuXHRcdFx0cmVhZGVyLnJlYWRBc1RleHQoZmlsZXNbMF0pXHJcblx0XHRcdGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoY2hvb3NlcilcclxuXHJcblx0XHRjaG9vc2VyLmNsaWNrKClcclxuXHJcbmV4cG9ydCB7VXRpbHN9IiwiaW1wb3J0IHtVdGlsc30gZnJvbSAnLi9VdGlscydcclxuXHJcblxyXG4jIERhdGEgcmVjb3JkZXIgY2FuIGJlIHVzZWQgdG8gcmVjb3JkIGRhdGEgZnJvbSBhIGdhbWUgc2Vzc2lvbi5cclxuI1xyXG4jIFRoYXQgZGF0YSBjYW4gdGhlbiBiZSB1c2VkIGZvciB0cmFpbmluZyBvZiBtb2RlbHMuXHJcbmNsYXNzIERhdGFSZWNvcmRlclxyXG5cdGNvbnN0cnVjdG9yOiAoKSAtPlxyXG5cdFx0IyBBY3RpdmUgc3RhdGUgb2YgdGhlIGRhdGEgcmVjb3JkZXJcclxuXHRcdEBhY3RpdmUgPSB0cnVlXHJcblx0XHRcclxuXHRcdCMgQ3VycmVudCBkYXRhIGJlaW5nIHJlY29yZGVkXHJcblx0XHRAZGF0YSA9IFtdXHJcblx0XHRcclxuXHRcdCMgQmVzdCBzY29yZSByZWNvcmRlZCB1bnRpbCBub3dcclxuXHRcdEBiZXN0U2NvcmUgPSAwXHJcblxyXG5cdFx0IyBCZXN0IGRhdGFzZXQgcmVjb3JkZWQgdXRpbCBub3dcclxuXHRcdEBiZXN0RGF0YSA9IFtdXHJcblxyXG5cclxuXHQjIEdldCB0aGUgYmVzdCBkYXRhIG9idGFpbmVkIGZyb20gdGhlIHJlY29yZGVyLlxyXG5cdGdldERhdGE6ICgpIC0+XHJcblx0XHRyZXR1cm4gQGJlc3REYXRhXHJcblxyXG5cdCMgRW5kIHJlY29yZGluZyBzZXNzaW9uIHRoZSBzY29yZSB3aWxsIGJlIGNvbXBhcmVkIHdpdGggcHJldmlvdXMgYmVzdCBzZXNzaW9uIHRvIGRlY2lkZSB3aGF0IGRhdGEgdG8ga2VlcC5cclxuXHRlbmQ6IChzY29yZSkgLT5cclxuXHRcdGlmIEBhY3RpdmVcclxuXHRcdFx0aWYgc2NvcmUgPiBAYmVzdFNjb3JlXHJcblx0XHRcdFx0QGJlc3REYXRhID0gQGRhdGFcclxuXHRcdFx0XHRAYmVzdFNjb3JlID0gc2NvcmVcclxuXHRcdFx0QGRhdGEgPSBbXVxyXG5cclxuXHQjIFJlY29yZCBzdGF0ZSBvZiBhIHNpbXVsYXRpb24gYW5kIHRoZSBjb250cm9sIGFjdGlvbiBzdGF0ZVxyXG5cdHJlY29yZDogKGNhcnQpIC0+XHJcblx0XHRpZiBAYWN0aXZlXHJcblx0XHRcdEBkYXRhLnB1c2goe1xyXG5cdFx0XHRcdGlucHV0OiBbY2FydC52ZWxvY2l0eSwgY2FydC5hbmdsZSwgY2FydC5wb3NpdGlvbl1cclxuXHRcdFx0XHRvdXRwdXQ6IFtjYXJ0LmxlZnRQcmVzc2VkLCBjYXJ0LnJpZ2h0UHJlc3NlZF1cclxuXHRcdFx0fSlcclxuXHJcbmV4cG9ydCB7RGF0YVJlY29yZGVyfSIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwic2VsZiIsIl9fd2VicGFja19yZXF1aXJlX18iLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwiVmVjdG9yMiIsImNvbnN0cnVjdG9yIiwieCIsInkiLCJCb3giLCJtaW4iLCJtYXgiLCJnZXRTaXplIiwiZHJhdyIsImNvbnRleHQiLCJzaXplIiwibGluZVdpZHRoIiwic3Ryb2tlUmVjdCIsIkxpbmUiLCJvcmlnaW4iLCJlbmQiLCJNYXRoIiwic3FydCIsInBvdyIsImJlZ2luUGF0aCIsIm1vdmVUbyIsImxpbmVUbyIsInN0cm9rZSIsIkNhcnRTaW11bGF0aW9uIiwiYmFycmllckRpc3RhbmNlIiwiYm94SGFsZlNpemUiLCJtb3ZlQWNjZWxlcmF0aW9uIiwibGltaXRBbmdsZSIsImZyaWN0aW9uIiwicGVuZHVsdW1HcmF2aXR5IiwicGVuZHVsdW1Nb21lbnR1bSIsImNhcnQiLCJwZW5kdWx1bSIsImJhcnJpZXJMZWZ0IiwiYmFycmllclJpZ2h0IiwicmVzZXQiLCJnYW1lT3ZlciIsInNjb3JlIiwicG9zaXRpb24iLCJsZWZ0UHJlc3NlZCIsInJpZ2h0UHJlc3NlZCIsImFjY2VsZXJhdGlvbiIsInZlbG9jaXR5IiwicmFuZG9tIiwiYW5nbGUiLCJ0cmFuc2xhdGUiLCJzdHJva2VTdHlsZSIsInNpbiIsImNvcyIsInVwZGF0ZSIsImRlbHRhIiwiY29uc29sZSIsImxvZyIsIkxpbmVhck1vZGVsIiwidmVsIiwiTGluZWFyUmVncmVzc2lvbiIsInBvcyIsImUiLCJqaXR0ZXIiLCJzY2FsZSIsImNsb25lIiwibSIsImNvbnRyb2wiLCJ2IiwiZGVjbCIsIm9yaSIsIlJ1bm5lciIsImxvZ2ljQ2FsbGJhY2siLCJzY29yZUxpbWl0IiwibG9nUGVyZm9ybWFuY2UiLCJ0aW1lIiwicGVyZm9ybWFuY2UiLCJub3ciLCJjYW52YXMiLCJvbkl0ZXJhdGlvbiIsIm9uR2FtZU92ZXIiLCJnZXRDb250ZXh0IiwibWF4U2NvcmUiLCJsYXN0Iiwic2F2ZSIsImNsZWFyUmVjdCIsIndpZHRoIiwiaGVpZ2h0IiwiZm9udCIsInRleHRBbGlnbiIsImZpbGxUZXh0IiwidHJhbnNmb3JtIiwicmVzdG9yZSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIkxpbmVhck1vZGVsVHJhaW4iLCJlcG9jaHMiLCJpdGVyYXRpb25zIiwicnVucyIsImJlc3RNb2RlbCIsImJlc3RTY29yZSIsInRlc3RNb2RlbCIsImVwb2NoTW9kZWwiLCJlcG9jaFNjb3JlIiwiaSIsIm1vZGVsIiwicG9pbnRzIiwiciIsInJ1bkhlYWRsZXNzIiwiVXRpbHMiLCJkYXRhIiwiZm5hbWUiLCJKU09OIiwic3RyaW5naWZ5IiwiYmxvYiIsIkJsb2IiLCJ0eXBlIiwiZG93bmxvYWQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJocmVmIiwid2luZG93IiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwic3R5bGUiLCJkaXNwbGF5Iiwib25jbGljayIsImJvZHkiLCJyZW1vdmVDaGlsZCIsInRoaXMiLCJhcHBlbmRDaGlsZCIsImNsaWNrIiwib25Mb2FkIiwiY2hvb3NlciIsIm9uY2hhbmdlIiwiZmlsZXMiLCJsZW5ndGgiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwib25sb2FkIiwidGV4dCIsInJlc3VsdCIsInJlYWRBc1RleHQiLCJEYXRhUmVjb3JkZXIiLCJhY3RpdmUiLCJiZXN0RGF0YSIsImdldERhdGEiLCJyZWNvcmQiLCJwdXNoIiwiaW5wdXQiLCJvdXRwdXQiXSwic291cmNlUm9vdCI6IiJ9